<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A programming framework for agentic AI"><meta name=author content="Chi Wang & Qingyun Wu"><link href=https://docs.ag2.ai/latest/docs/user-guide/advanced-concepts/orchestration/group-chat/context-variables/ rel=canonical><link href=../agent-tools-functions/ rel=prev><link href=../handoffs/ rel=next><link rel=icon href=../../../../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>Context Variables - AG2</title><link rel=stylesheet href=../../../../../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../../../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../../css/timeago.css><link rel=stylesheet href=../../../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../../../stylesheets/extra.ff0633.min.css><script>__md_scope=new URL("../../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-2GN2KN2CE4"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-2GN2KN2CE4",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-2GN2KN2CE4",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta http-equiv=Cache-Control content="no-cache, no-store, must-revalidate"><meta property=og:type content=website><meta property=og:title content="AG2 - Context Variables"><meta property=og:description content="A programming framework for agentic AI"><meta content=https://docs.ag2.ai/latest/docs/user-guide/advanced-concepts/orchestration/group-chat/context-variables/ property=og:url><meta property=og:image content=https://opengraph.githubassets.com/1671805243.560327/ag2ai/ag2><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="AG2 - Context Variables"><meta name=twitter:description content="A programming framework for agentic AI"><meta name=twitter:image content=https://opengraph.githubassets.com/1671805243.560327/ag2ai/ag2><link rel=icon href=https://docs.ag2.ai/latest/assets/img/favicon.svg type=image/x-icon><link rel=icon href=https://docs.ag2.ai/latest/assets/img/favicon-dark.svg type=image/x-icon media="(prefers-color-scheme: light)"><link rel=icon href=https://docs.ag2.ai/latest/assets/img/favicon.svg type=image/x-icon media="(prefers-color-scheme: dark)"><link href=../../../../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src=../../../../../../assets/javascripts/glightbox.min.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#introduction-to-context-variables class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../../../../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../../../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../../.. title=AG2 class="md-header__button md-logo" aria-label=AG2 data-md-component=logo> <img src=../../../../../../assets/img/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AG2 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Context Variables </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ag2ai/ag2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ag2ai/ag2 </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../../../quick-start/ class=md-tabs__link> Quick Start </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../../../basic-concepts/installing-ag2/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../../../../api-reference/autogen/Agent/ class=md-tabs__link> API References </a> </li> <li class=md-tabs__item> <a href=../../../../../contributor-guide/contributing/ class=md-tabs__link> Contributor Guide </a> </li> <li class=md-tabs__item> <a href=../../../../../ecosystem/agentops/ class=md-tabs__link> Ecosystem </a> </li> <li class=md-tabs__item> <a href=../../../../../use-cases/use-cases/customer-service/ class=md-tabs__link> Use Cases </a> </li> <li class=md-tabs__item> <a href=../../../../../user-stories/2025-04-30-Cegid-Pulse-OS/cegid_pulse_os/ class=md-tabs__link> Community Insights </a> </li> <li class=md-tabs__item> <a href=../../../../../blog/ class=md-tabs__link> Blog </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../../.. title=AG2 class="md-nav__button md-logo" aria-label=AG2 data-md-component=logo> <img src=../../../../../../assets/img/logo.svg alt=logo> </a> AG2 </label> <div class=md-nav__source> <a href=https://github.com/ag2ai/ag2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ag2ai/ag2 </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quick-start/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../basic-concepts/installing-ag2/ class=md-nav__link> <span class=md-ellipsis> Installing AG2 </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../basic-concepts/overview/ class=md-nav__link> <span class=md-ellipsis> Basic Concepts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Advanced Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Advanced Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../llm-configuration-deep-dive/ class=md-nav__link> <span class=md-ellipsis> LLM Configuration Deep Dive </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_2 checked> <label class=md-nav__link for=__nav_2_3_2 id=__nav_2_3_2_label tabindex=0> <span class=md-ellipsis> Agent Orchestration Deep Dive </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3_2> <span class="md-nav__icon md-icon"></span> Agent Orchestration Deep Dive </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../orchestrations/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../two-agent-chat/ class=md-nav__link> <span class=md-ellipsis> Two Agent Chat </span> </a> </li> <li class=md-nav__item> <a href=../../sequential-chat/ class=md-nav__link> <span class=md-ellipsis> Sequential Chat </span> </a> </li> <li class=md-nav__item> <a href=../../nested-chat/ class=md-nav__link> <span class=md-ellipsis> Nested Chat </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_2_5 checked> <label class=md-nav__link for=__nav_2_3_2_5 id=__nav_2_3_2_5_label tabindex=0> <span class=md-ellipsis> Group Chats </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_3_2_5_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3_2_5> <span class="md-nav__icon md-icon"></span> Group Chats </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../introduction/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../agent-tools-functions/ class=md-nav__link> <span class=md-ellipsis> Tools and Functions </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Context Variables </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Context Variables </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction-to-context-variables class=md-nav__link> <span class=md-ellipsis> Introduction to Context Variables </span> </a> <nav class=md-nav aria-label="Introduction to Context Variables"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-hospital-er-analogy class=md-nav__link> <span class=md-ellipsis> The Hospital ER Analogy </span> </a> </li> <li class=md-nav__item> <a href=#the-contextvariables-class class=md-nav__link> <span class=md-ellipsis> The ContextVariables Class </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#core-functionality class=md-nav__link> <span class=md-ellipsis> Core Functionality </span> </a> <nav class=md-nav aria-label="Core Functionality"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#creating-and-initializing-context-variables class=md-nav__link> <span class=md-ellipsis> Creating and Initializing Context Variables </span> </a> </li> <li class=md-nav__item> <a href=#reading-and-writing-context-values class=md-nav__link> <span class=md-ellipsis> Reading and Writing Context Values </span> </a> </li> <li class=md-nav__item> <a href=#dictionary-like-interface class=md-nav__link> <span class=md-ellipsis> Dictionary-like Interface </span> </a> </li> <li class=md-nav__item> <a href=#persistence-across-agent-transitions class=md-nav__link> <span class=md-ellipsis> Persistence Across Agent Transitions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#extending-the-triage-example class=md-nav__link> <span class=md-ellipsis> Extending the Triage Example </span> </a> </li> <li class=md-nav__item> <a href=#example-output class=md-nav__link> <span class=md-ellipsis> Example Output </span> </a> </li> <li class=md-nav__item> <a href=#next-steps class=md-nav__link> <span class=md-ellipsis> Next Steps </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../handoffs/ class=md-nav__link> <span class=md-ellipsis> Handoffs </span> </a> </li> <li class=md-nav__item> <a href=../patterns/ class=md-nav__link> <span class=md-ellipsis> Orchestration Patterns </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../swarm/deprecation/ class=md-nav__link> <span class=md-ellipsis> Swarm </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../ending-a-chat/ class=md-nav__link> <span class=md-ellipsis> Ending A Chat </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../pattern-cookbook/overview/ class=md-nav__link> <span class=md-ellipsis> Pattern Cookbook </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../tools/ class=md-nav__link> <span class=md-ellipsis> Tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../realtime-agent/ class=md-nav__link> <span class=md-ellipsis> RealtimeAgent </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../../rag/ class=md-nav__link> <span class=md-ellipsis> RAG </span> </a> </li> <li class=md-nav__item> <a href=../../../code-execution/ class=md-nav__link> <span class=md-ellipsis> Code Execution </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../models/amazon-bedrock/ class=md-nav__link> <span class=md-ellipsis> Model Providers </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../reference-agents/ class=md-nav__link> <span class=md-ellipsis> Reference Agents </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../reference-tools/ class=md-nav__link> <span class=md-ellipsis> Reference Tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../../../../faq/FAQ/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../../api-reference/autogen/Agent/ class=md-nav__link> <span class=md-ellipsis> API References </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../../contributor-guide/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributor Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../../ecosystem/agentops/ class=md-nav__link> <span class=md-ellipsis> Ecosystem </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../../use-cases/use-cases/customer-service/ class=md-nav__link> <span class=md-ellipsis> Use Cases </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../../user-stories/2025-04-30-Cegid-Pulse-OS/cegid_pulse_os/ class=md-nav__link> <span class=md-ellipsis> Community Insights </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../../blog/ class=md-nav__link> <span class=md-ellipsis> Blog </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction-to-context-variables class=md-nav__link> <span class=md-ellipsis> Introduction to Context Variables </span> </a> <nav class=md-nav aria-label="Introduction to Context Variables"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-hospital-er-analogy class=md-nav__link> <span class=md-ellipsis> The Hospital ER Analogy </span> </a> </li> <li class=md-nav__item> <a href=#the-contextvariables-class class=md-nav__link> <span class=md-ellipsis> The ContextVariables Class </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#core-functionality class=md-nav__link> <span class=md-ellipsis> Core Functionality </span> </a> <nav class=md-nav aria-label="Core Functionality"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#creating-and-initializing-context-variables class=md-nav__link> <span class=md-ellipsis> Creating and Initializing Context Variables </span> </a> </li> <li class=md-nav__item> <a href=#reading-and-writing-context-values class=md-nav__link> <span class=md-ellipsis> Reading and Writing Context Values </span> </a> </li> <li class=md-nav__item> <a href=#dictionary-like-interface class=md-nav__link> <span class=md-ellipsis> Dictionary-like Interface </span> </a> </li> <li class=md-nav__item> <a href=#persistence-across-agent-transitions class=md-nav__link> <span class=md-ellipsis> Persistence Across Agent Transitions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#extending-the-triage-example class=md-nav__link> <span class=md-ellipsis> Extending the Triage Example </span> </a> </li> <li class=md-nav__item> <a href=#example-output class=md-nav__link> <span class=md-ellipsis> Example Output </span> </a> </li> <li class=md-nav__item> <a href=#next-steps class=md-nav__link> <span class=md-ellipsis> Next Steps </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ag2ai/ag2/edit/main/website/docs/user-guide/advanced-concepts/orchestration/group-chat/context-variables.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m7 14.94 6.06-6.06 2.06 2.06L9.06 17H7zM12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m4.7-10.65-1 1-2.05-2.05 1-1c.21-.22.56-.22.77 0l1.28 1.28c.22.21.22.56 0 .77M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2"/></svg> </a> <h1>Context Variables</h1> <p>Context Variables provide shared memory for your agents, allowing them to maintain state across a conversation and make decisions based on that shared information. If tools are the specialized capabilities agents can use, context variables are their collective knowledge base.</p> <h2 id=introduction-to-context-variables>Introduction to Context Variables<a class=headerlink href=#introduction-to-context-variables title="Permanent link">#</a></h2> <p>Context Variables are a structured way to store and share information between agents in a group chat. They act as a persistent memory that:</p> <ul> <li>Maintains state throughout the entire conversation</li> <li>Is accessible to all agents in the group</li> <li>Can be read and updated by any agent or tool</li> <li>Stores data in a key-value format</li> </ul> <h3 id=the-hospital-er-analogy>The Hospital ER Analogy<a class=headerlink href=#the-hospital-er-analogy title="Permanent link">#</a></h3> <p>Let's return to our hospital emergency room analogy to understand context variables.</p> <p>Imagine a patient chart that follows them throughout their entire hospital visit. When a patient arrives at the ER:</p> <ul> <li>The triage nurse records their symptoms, vital signs, and medical history</li> <li>When the patient moves to a specialist, the chart goes with them</li> <li>The specialist adds their observations and test results</li> <li>If another specialist needs to see the patient, they have access to all previous notes</li> <li>At discharge, the chart contains the complete history of the visit</li> </ul> <p>In this analogy:</p> <ul> <li>The patient chart is the context variables</li> <li>Each medical professional is an agent</li> <li>Adding notes to the chart is updating context variables</li> <li>Reading previous entries is accessing context variables</li> <li>The entire medical team shares one source of truth about the patient</li> </ul> <h3 id=the-contextvariables-class>The ContextVariables Class<a class=headerlink href=#the-contextvariables-class title="Permanent link">#</a></h3> <p>Context variables in AG2 are implemented through the <a href=../../../../../api-reference/autogen/agentchat/group/context_variables/ContextVariables><code>ContextVariables</code></a> class, which provides a dictionary-like interface to store and retrieve values:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=kn>from</span><span class=w> </span><span class=nn>autogen.agentchat.group</span><span class=w> </span><span class=kn>import</span> <span class=n>ContextVariables</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=c1># Create context variables</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=n>context</span> <span class=o>=</span> <span class=n>ContextVariables</span><span class=p>(</span><span class=n>data</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=s2>&quot;user_name&quot;</span><span class=p>:</span> <span class=s2>&quot;Alex&quot;</span><span class=p>,</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    <span class=s2>&quot;issue_count&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>    <span class=s2>&quot;previous_issues&quot;</span><span class=p>:</span> <span class=p>[]</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=p>})</span>
</code></pre></div> <h2 id=core-functionality>Core Functionality<a class=headerlink href=#core-functionality title="Permanent link">#</a></h2> <h3 id=creating-and-initializing-context-variables>Creating and Initializing Context Variables<a class=headerlink href=#creating-and-initializing-context-variables title="Permanent link">#</a></h3> <p>You can create context variables when setting up your group chat pattern:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=kn>from</span><span class=w> </span><span class=nn>autogen.agentchat.group</span><span class=w> </span><span class=kn>import</span> <span class=n>ContextVariables</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=kn>from</span><span class=w> </span><span class=nn>autogen.agentchat.group.patterns</span><span class=w> </span><span class=kn>import</span> <span class=n>AutoPattern</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=c1># Initialize context variables with initial data</span>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=hll><span class=n>context</span> <span class=o>=</span> <span class=n>ContextVariables</span><span class=p>(</span><span class=n>data</span><span class=o>=</span><span class=p>{</span>
</span><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=hll>    <span class=s2>&quot;user_name&quot;</span><span class=p>:</span> <span class=s2>&quot;Alex&quot;</span><span class=p>,</span>
</span><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=hll>    <span class=s2>&quot;issue_count&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=hll>    <span class=s2>&quot;previous_issues&quot;</span><span class=p>:</span> <span class=p>[]</span>
</span><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=hll><span class=p>})</span>
</span><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=c1># Create pattern with the context variables</span>
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=n>pattern</span> <span class=o>=</span> <span class=n>AutoPattern</span><span class=p>(</span>
<a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a>    <span class=n>initial_agent</span><span class=o>=</span><span class=n>triage_agent</span><span class=p>,</span>
<a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>    <span class=n>agents</span><span class=o>=</span><span class=p>[</span><span class=n>triage_agent</span><span class=p>,</span> <span class=n>tech_agent</span><span class=p>,</span> <span class=n>general_agent</span><span class=p>],</span>
<a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a>    <span class=n>user_agent</span><span class=o>=</span><span class=n>user</span><span class=p>,</span>
<a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a><span class=hll>    <span class=n>context_variables</span><span class=o>=</span><span class=n>context</span><span class=p>,</span>  <span class=c1># Pass context variables to the pattern</span>
</span><a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a>    <span class=n>group_manager_args</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;llm_config&quot;</span><span class=p>:</span> <span class=n>llm_config</span><span class=p>}</span>
<a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a><span class=p>)</span>
</code></pre></div> <h3 id=reading-and-writing-context-values>Reading and Writing Context Values<a class=headerlink href=#reading-and-writing-context-values title="Permanent link">#</a></h3> <p>The <a href=../../../../../api-reference/autogen/agentchat/group/context_variables/ContextVariables><code>ContextVariables</code></a> class provides several methods for reading and writing values:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1># Reading values</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=n>user_name</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;user_name&quot;</span><span class=p>)</span>  <span class=c1># Returns &quot;Alex&quot;</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=n>non_existent</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;non_existent&quot;</span><span class=p>,</span> <span class=s2>&quot;default&quot;</span><span class=p>)</span>  <span class=c1># Returns &quot;default&quot;</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=c1># Writing values</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=n>context</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;issue_count&quot;</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>  <span class=c1># Sets issue_count to 1</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=n>context</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=s2>&quot;last_login&quot;</span><span class=p>:</span> <span class=s2>&quot;2023-05-01&quot;</span><span class=p>,</span> <span class=s2>&quot;premium&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>})</span>  <span class=c1># Update multiple values</span>
</code></pre></div> <h3 id=dictionary-like-interface>Dictionary-like Interface<a class=headerlink href=#dictionary-like-interface title="Permanent link">#</a></h3> <p>The <a href=../../../../../api-reference/autogen/agentchat/group/context_variables/ContextVariables><code>ContextVariables</code></a> class implements a dictionary-like interface, allowing you to use a familiar syntax:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1># Dictionary-like operations</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=n>user_name</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;user_name&quot;</span><span class=p>]</span>  <span class=c1># Get a value</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=n>context</span><span class=p>[</span><span class=s2>&quot;issue_count&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>2</span>  <span class=c1># Set a value</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=k>del</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;temporary_value&quot;</span><span class=p>]</span>  <span class=c1># Delete a value</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=k>if</span> <span class=s2>&quot;premium&quot;</span> <span class=ow>in</span> <span class=n>context</span><span class=p>:</span>  <span class=c1># Check if a key exists</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Premium user&quot;</span><span class=p>)</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=c1># Iterate over keys and values</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>context</span><span class=p>:</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>value</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> <h3 id=persistence-across-agent-transitions>Persistence Across Agent Transitions<a class=headerlink href=#persistence-across-agent-transitions title="Permanent link">#</a></h3> <p>One of the most powerful features of context variables is their persistence across agent transitions. When control passes from one agent to another, the context variables go with it, maintaining the shared state.</p> <p>In the below example, the <code>route_to_tech_support</code> function updates the context variables with the current issue and passes the control to the tech support agent who can then access the updated context variables to make informed decisions.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=k>def</span><span class=w> </span><span class=nf>route_to_tech_support</span><span class=p>(</span><span class=n>issue</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>context_variables</span><span class=p>:</span> <span class=n>ContextVariables</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ReplyResult</span><span class=p>:</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Route an issue to technical support.&quot;&quot;&quot;</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>    <span class=c1># Update the context with the current issue</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>    <span class=n>context_variables</span><span class=p>[</span><span class=s2>&quot;current_issue&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>issue</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>    <span class=n>context_variables</span><span class=p>[</span><span class=s2>&quot;issue_count&quot;</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>    <span class=n>context_variables</span><span class=p>[</span><span class=s2>&quot;previous_issues&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>issue</span><span class=p>)</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>    <span class=c1># Return control to the tech agent with the updated context</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>    <span class=k>return</span> <span class=n>ReplyResult</span><span class=p>(</span>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>        <span class=n>message</span><span class=o>=</span><span class=s2>&quot;Routing to technical support...&quot;</span><span class=p>,</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>        <span class=n>target</span><span class=o>=</span><span class=n>AgentTarget</span><span class=p>(</span><span class=n>tech_agent</span><span class=p>),</span>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>        <span class=n>context_variables</span><span class=o>=</span><span class=n>context_variables</span>  <span class=c1># Update the shared context</span>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a>    <span class=p>)</span>
</code></pre></div> <h2 id=extending-the-triage-example>Extending the Triage Example<a class=headerlink href=#extending-the-triage-example title="Permanent link">#</a></h2> <p>Let's extend our triage example to demonstrate how context variables enhance the customer support experience by maintaining information about the user and their issues.</p> <p>Here's how we can enhance our triage system with context variables:</p> <ul> <li>Create initial context variables with session information</li> <li>Track and store each user query in the context</li> <li>Record solutions provided by technical support</li> <li>Intentionally print the context variables before and after processing in the functions for debugging</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Annotated</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=kn>from</span><span class=w> </span><span class=nn>datetime</span><span class=w> </span><span class=kn>import</span> <span class=n>datetime</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=kn>from</span><span class=w> </span><span class=nn>autogen</span><span class=w> </span><span class=kn>import</span> <span class=n>ConversableAgent</span><span class=p>,</span> <span class=n>LLMConfig</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=kn>from</span><span class=w> </span><span class=nn>autogen.agentchat</span><span class=w> </span><span class=kn>import</span> <span class=n>initiate_group_chat</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=kn>from</span><span class=w> </span><span class=nn>autogen.agentchat.group.patterns</span><span class=w> </span><span class=kn>import</span> <span class=n>AutoPattern</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=kn>from</span><span class=w> </span><span class=nn>autogen.agentchat.group</span><span class=w> </span><span class=kn>import</span> <span class=n>ReplyResult</span><span class=p>,</span> <span class=n>AgentNameTarget</span><span class=p>,</span> <span class=n>ContextVariables</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=c1># Initialize context variables</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=n>support_context</span> <span class=o>=</span> <span class=n>ContextVariables</span><span class=p>(</span><span class=n>data</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>    <span class=s2>&quot;session_start&quot;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>    <span class=s2>&quot;query_history&quot;</span><span class=p>:</span> <span class=p>[],</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>    <span class=s2>&quot;solutions_provided&quot;</span><span class=p>:</span> <span class=p>[],</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>    <span class=s2>&quot;query_count&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>    <span class=s2>&quot;solution_count&quot;</span><span class=p>:</span> <span class=mi>0</span>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=p>})</span>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=c1># Define tools that use context variables</span>
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=k>def</span><span class=w> </span><span class=nf>classify_and_log_query</span><span class=p>(</span>
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a>    <span class=n>query</span><span class=p>:</span> <span class=n>Annotated</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=s2>&quot;The user query to classify&quot;</span><span class=p>],</span>
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a>    <span class=n>context_variables</span><span class=p>:</span> <span class=n>ContextVariables</span>
<a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ReplyResult</span><span class=p>:</span>
<a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Classify a user query as technical or general and log it in the context.&quot;&quot;&quot;</span>
<a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a>
<a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a>    <span class=c1># Printing the context variables</span>
<a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>context_variables</span><span class=o>.</span><span class=n>to_dict</span><span class=p>()</span><span class=si>=}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a>
<a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a>    <span class=c1># Record this query in history</span>
<a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a>    <span class=n>query_history</span> <span class=o>=</span> <span class=n>context_variables</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;query_history&quot;</span><span class=p>,</span> <span class=p>[])</span>
<a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a>    <span class=n>query_record</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a>        <span class=s2>&quot;timestamp&quot;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span>
<a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a>        <span class=s2>&quot;query&quot;</span><span class=p>:</span> <span class=n>query</span>
<a id=__codelineno-5-32 name=__codelineno-5-32 href=#__codelineno-5-32></a>    <span class=p>}</span>
<a id=__codelineno-5-33 name=__codelineno-5-33 href=#__codelineno-5-33></a>    <span class=n>query_history</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>query_record</span><span class=p>)</span>
<a id=__codelineno-5-34 name=__codelineno-5-34 href=#__codelineno-5-34></a>    <span class=n>context_variables</span><span class=p>[</span><span class=s2>&quot;query_history&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>query_history</span>
<a id=__codelineno-5-35 name=__codelineno-5-35 href=#__codelineno-5-35></a>    <span class=n>context_variables</span><span class=p>[</span><span class=s2>&quot;last_query&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>query</span>
<a id=__codelineno-5-36 name=__codelineno-5-36 href=#__codelineno-5-36></a>    <span class=n>context_variables</span><span class=p>[</span><span class=s2>&quot;query_count&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>query_history</span><span class=p>)</span>
<a id=__codelineno-5-37 name=__codelineno-5-37 href=#__codelineno-5-37></a>
<a id=__codelineno-5-38 name=__codelineno-5-38 href=#__codelineno-5-38></a>    <span class=c1># Basic classification logic</span>
<a id=__codelineno-5-39 name=__codelineno-5-39 href=#__codelineno-5-39></a>    <span class=n>technical_keywords</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;error&quot;</span><span class=p>,</span> <span class=s2>&quot;bug&quot;</span><span class=p>,</span> <span class=s2>&quot;broken&quot;</span><span class=p>,</span> <span class=s2>&quot;crash&quot;</span><span class=p>,</span> <span class=s2>&quot;not working&quot;</span><span class=p>,</span> <span class=s2>&quot;shutting down&quot;</span><span class=p>]</span>
<a id=__codelineno-5-40 name=__codelineno-5-40 href=#__codelineno-5-40></a>    <span class=n>is_technical</span> <span class=o>=</span> <span class=nb>any</span><span class=p>(</span><span class=n>keyword</span> <span class=ow>in</span> <span class=n>query</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=k>for</span> <span class=n>keyword</span> <span class=ow>in</span> <span class=n>technical_keywords</span><span class=p>)</span>
<a id=__codelineno-5-41 name=__codelineno-5-41 href=#__codelineno-5-41></a>
<a id=__codelineno-5-42 name=__codelineno-5-42 href=#__codelineno-5-42></a>    <span class=c1># Update context with classification</span>
<a id=__codelineno-5-43 name=__codelineno-5-43 href=#__codelineno-5-43></a>    <span class=k>if</span> <span class=n>is_technical</span><span class=p>:</span>
<a id=__codelineno-5-44 name=__codelineno-5-44 href=#__codelineno-5-44></a>        <span class=n>target_agent</span> <span class=o>=</span> <span class=n>AgentNameTarget</span><span class=p>(</span><span class=s2>&quot;tech_agent&quot;</span><span class=p>)</span>
<a id=__codelineno-5-45 name=__codelineno-5-45 href=#__codelineno-5-45></a>        <span class=n>context_variables</span><span class=p>[</span><span class=s2>&quot;query_type&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;technical&quot;</span>
<a id=__codelineno-5-46 name=__codelineno-5-46 href=#__codelineno-5-46></a>        <span class=n>message</span> <span class=o>=</span> <span class=s2>&quot;This appears to be a technical issue. Routing to technical support...&quot;</span>
<a id=__codelineno-5-47 name=__codelineno-5-47 href=#__codelineno-5-47></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-5-48 name=__codelineno-5-48 href=#__codelineno-5-48></a>        <span class=n>target_agent</span> <span class=o>=</span> <span class=n>AgentNameTarget</span><span class=p>(</span><span class=s2>&quot;general_agent&quot;</span><span class=p>)</span>
<a id=__codelineno-5-49 name=__codelineno-5-49 href=#__codelineno-5-49></a>        <span class=n>context_variables</span><span class=p>[</span><span class=s2>&quot;query_type&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;general&quot;</span>
<a id=__codelineno-5-50 name=__codelineno-5-50 href=#__codelineno-5-50></a>        <span class=n>message</span> <span class=o>=</span> <span class=s2>&quot;This appears to be a general question. Routing to general support...&quot;</span>
<a id=__codelineno-5-51 name=__codelineno-5-51 href=#__codelineno-5-51></a>
<a id=__codelineno-5-52 name=__codelineno-5-52 href=#__codelineno-5-52></a>    <span class=c1># Printing the context variables</span>
<a id=__codelineno-5-53 name=__codelineno-5-53 href=#__codelineno-5-53></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>context_variables</span><span class=o>.</span><span class=n>to_dict</span><span class=p>()</span><span class=si>=}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-5-54 name=__codelineno-5-54 href=#__codelineno-5-54></a>
<a id=__codelineno-5-55 name=__codelineno-5-55 href=#__codelineno-5-55></a>    <span class=k>return</span> <span class=n>ReplyResult</span><span class=p>(</span>
<a id=__codelineno-5-56 name=__codelineno-5-56 href=#__codelineno-5-56></a>        <span class=n>message</span><span class=o>=</span><span class=n>message</span><span class=p>,</span>
<a id=__codelineno-5-57 name=__codelineno-5-57 href=#__codelineno-5-57></a>        <span class=n>target</span><span class=o>=</span><span class=n>target_agent</span><span class=p>,</span>
<a id=__codelineno-5-58 name=__codelineno-5-58 href=#__codelineno-5-58></a>        <span class=n>context_variables</span><span class=o>=</span><span class=n>context_variables</span>
<a id=__codelineno-5-59 name=__codelineno-5-59 href=#__codelineno-5-59></a>    <span class=p>)</span>
<a id=__codelineno-5-60 name=__codelineno-5-60 href=#__codelineno-5-60></a>
<a id=__codelineno-5-61 name=__codelineno-5-61 href=#__codelineno-5-61></a><span class=k>def</span><span class=w> </span><span class=nf>provide_technical_solution</span><span class=p>(</span>
<a id=__codelineno-5-62 name=__codelineno-5-62 href=#__codelineno-5-62></a>    <span class=n>solution</span><span class=p>:</span> <span class=n>Annotated</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=s2>&quot;Technical solution to provide&quot;</span><span class=p>],</span>
<a id=__codelineno-5-63 name=__codelineno-5-63 href=#__codelineno-5-63></a>    <span class=n>context_variables</span><span class=p>:</span> <span class=n>ContextVariables</span>
<a id=__codelineno-5-64 name=__codelineno-5-64 href=#__codelineno-5-64></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ReplyResult</span><span class=p>:</span>
<a id=__codelineno-5-65 name=__codelineno-5-65 href=#__codelineno-5-65></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Provide a technical solution and record it in the context.&quot;&quot;&quot;</span>
<a id=__codelineno-5-66 name=__codelineno-5-66 href=#__codelineno-5-66></a>
<a id=__codelineno-5-67 name=__codelineno-5-67 href=#__codelineno-5-67></a>    <span class=c1># Printing the context variables</span>
<a id=__codelineno-5-68 name=__codelineno-5-68 href=#__codelineno-5-68></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>context_variables</span><span class=o>.</span><span class=n>to_dict</span><span class=p>()</span><span class=si>=}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-5-69 name=__codelineno-5-69 href=#__codelineno-5-69></a>
<a id=__codelineno-5-70 name=__codelineno-5-70 href=#__codelineno-5-70></a>    <span class=c1># Record the solution</span>
<a id=__codelineno-5-71 name=__codelineno-5-71 href=#__codelineno-5-71></a>    <span class=n>last_query</span> <span class=o>=</span> <span class=n>context_variables</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;last_query&quot;</span><span class=p>,</span> <span class=s2>&quot;your issue&quot;</span><span class=p>)</span>
<a id=__codelineno-5-72 name=__codelineno-5-72 href=#__codelineno-5-72></a>    <span class=n>solutions_provided</span> <span class=o>=</span> <span class=n>context_variables</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;solutions_provided&quot;</span><span class=p>,</span> <span class=p>[])</span>
<a id=__codelineno-5-73 name=__codelineno-5-73 href=#__codelineno-5-73></a>
<a id=__codelineno-5-74 name=__codelineno-5-74 href=#__codelineno-5-74></a>    <span class=n>solution_record</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-5-75 name=__codelineno-5-75 href=#__codelineno-5-75></a>        <span class=s2>&quot;timestamp&quot;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span>
<a id=__codelineno-5-76 name=__codelineno-5-76 href=#__codelineno-5-76></a>        <span class=s2>&quot;query&quot;</span><span class=p>:</span> <span class=n>last_query</span><span class=p>,</span>
<a id=__codelineno-5-77 name=__codelineno-5-77 href=#__codelineno-5-77></a>        <span class=s2>&quot;solution&quot;</span><span class=p>:</span> <span class=n>solution</span>
<a id=__codelineno-5-78 name=__codelineno-5-78 href=#__codelineno-5-78></a>    <span class=p>}</span>
<a id=__codelineno-5-79 name=__codelineno-5-79 href=#__codelineno-5-79></a>    <span class=n>solutions_provided</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>solution_record</span><span class=p>)</span>
<a id=__codelineno-5-80 name=__codelineno-5-80 href=#__codelineno-5-80></a>
<a id=__codelineno-5-81 name=__codelineno-5-81 href=#__codelineno-5-81></a>    <span class=c1># Update context</span>
<a id=__codelineno-5-82 name=__codelineno-5-82 href=#__codelineno-5-82></a>    <span class=n>context_variables</span><span class=p>[</span><span class=s2>&quot;solutions_provided&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>solutions_provided</span>
<a id=__codelineno-5-83 name=__codelineno-5-83 href=#__codelineno-5-83></a>    <span class=n>context_variables</span><span class=p>[</span><span class=s2>&quot;last_solution&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>solution</span>
<a id=__codelineno-5-84 name=__codelineno-5-84 href=#__codelineno-5-84></a>    <span class=n>context_variables</span><span class=p>[</span><span class=s2>&quot;solution_count&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>solutions_provided</span><span class=p>)</span>
<a id=__codelineno-5-85 name=__codelineno-5-85 href=#__codelineno-5-85></a>
<a id=__codelineno-5-86 name=__codelineno-5-86 href=#__codelineno-5-86></a>    <span class=c1># Printing the context variables</span>
<a id=__codelineno-5-87 name=__codelineno-5-87 href=#__codelineno-5-87></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>context_variables</span><span class=o>.</span><span class=n>to_dict</span><span class=p>()</span><span class=si>=}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-5-88 name=__codelineno-5-88 href=#__codelineno-5-88></a>
<a id=__codelineno-5-89 name=__codelineno-5-89 href=#__codelineno-5-89></a>    <span class=k>return</span> <span class=n>ReplyResult</span><span class=p>(</span>
<a id=__codelineno-5-90 name=__codelineno-5-90 href=#__codelineno-5-90></a>        <span class=n>message</span><span class=o>=</span><span class=n>solution</span><span class=p>,</span>
<a id=__codelineno-5-91 name=__codelineno-5-91 href=#__codelineno-5-91></a>        <span class=n>context_variables</span><span class=o>=</span><span class=n>context_variables</span>
<a id=__codelineno-5-92 name=__codelineno-5-92 href=#__codelineno-5-92></a>    <span class=p>)</span>
<a id=__codelineno-5-93 name=__codelineno-5-93 href=#__codelineno-5-93></a>
<a id=__codelineno-5-94 name=__codelineno-5-94 href=#__codelineno-5-94></a><span class=c1># Create the agents</span>
<a id=__codelineno-5-95 name=__codelineno-5-95 href=#__codelineno-5-95></a><span class=n>llm_config</span> <span class=o>=</span> <span class=n>LLMConfig</span><span class=p>(</span><span class=n>api_type</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&quot;gpt-4o-mini&quot;</span><span class=p>)</span>
<a id=__codelineno-5-96 name=__codelineno-5-96 href=#__codelineno-5-96></a>
<a id=__codelineno-5-97 name=__codelineno-5-97 href=#__codelineno-5-97></a><span class=k>with</span> <span class=n>llm_config</span><span class=p>:</span>
<a id=__codelineno-5-98 name=__codelineno-5-98 href=#__codelineno-5-98></a>    <span class=n>triage_agent</span> <span class=o>=</span> <span class=n>ConversableAgent</span><span class=p>(</span>
<a id=__codelineno-5-99 name=__codelineno-5-99 href=#__codelineno-5-99></a>        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;triage_agent&quot;</span><span class=p>,</span>
<a id=__codelineno-5-100 name=__codelineno-5-100 href=#__codelineno-5-100></a>        <span class=n>system_message</span><span class=o>=</span><span class=s2>&quot;&quot;&quot;You are a triage agent. For each user query,</span>
<a id=__codelineno-5-101 name=__codelineno-5-101 href=#__codelineno-5-101></a><span class=s2>        identify whether it is a technical issue or a general question.</span>
<a id=__codelineno-5-102 name=__codelineno-5-102 href=#__codelineno-5-102></a><span class=s2>        Use the classify_and_log_query tool to categorize and log queries.&quot;&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-5-103 name=__codelineno-5-103 href=#__codelineno-5-103></a>        <span class=n>functions</span><span class=o>=</span><span class=p>[</span><span class=n>classify_and_log_query</span><span class=p>]</span>
<a id=__codelineno-5-104 name=__codelineno-5-104 href=#__codelineno-5-104></a>    <span class=p>)</span>
<a id=__codelineno-5-105 name=__codelineno-5-105 href=#__codelineno-5-105></a>
<a id=__codelineno-5-106 name=__codelineno-5-106 href=#__codelineno-5-106></a>    <span class=n>tech_agent</span> <span class=o>=</span> <span class=n>ConversableAgent</span><span class=p>(</span>
<a id=__codelineno-5-107 name=__codelineno-5-107 href=#__codelineno-5-107></a>        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;tech_agent&quot;</span><span class=p>,</span>
<a id=__codelineno-5-108 name=__codelineno-5-108 href=#__codelineno-5-108></a>        <span class=n>system_message</span><span class=o>=</span><span class=s2>&quot;&quot;&quot;You solve technical problems like software bugs</span>
<a id=__codelineno-5-109 name=__codelineno-5-109 href=#__codelineno-5-109></a><span class=s2>        and hardware issues. After analyzing the problem, use the provide_technical_solution</span>
<a id=__codelineno-5-110 name=__codelineno-5-110 href=#__codelineno-5-110></a><span class=s2>        tool to format your response consistently and log it for future reference.</span>
<a id=__codelineno-5-111 name=__codelineno-5-111 href=#__codelineno-5-111></a>
<a id=__codelineno-5-112 name=__codelineno-5-112 href=#__codelineno-5-112></a><span class=s2>        Check context variables for any user history before responding.&quot;&quot;&quot;</span><span class=p>,</span>
<a id=__codelineno-5-113 name=__codelineno-5-113 href=#__codelineno-5-113></a>        <span class=n>functions</span><span class=o>=</span><span class=p>[</span><span class=n>provide_technical_solution</span><span class=p>]</span>
<a id=__codelineno-5-114 name=__codelineno-5-114 href=#__codelineno-5-114></a>    <span class=p>)</span>
<a id=__codelineno-5-115 name=__codelineno-5-115 href=#__codelineno-5-115></a>
<a id=__codelineno-5-116 name=__codelineno-5-116 href=#__codelineno-5-116></a>    <span class=n>general_agent</span> <span class=o>=</span> <span class=n>ConversableAgent</span><span class=p>(</span>
<a id=__codelineno-5-117 name=__codelineno-5-117 href=#__codelineno-5-117></a>        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;general_agent&quot;</span><span class=p>,</span>
<a id=__codelineno-5-118 name=__codelineno-5-118 href=#__codelineno-5-118></a>        <span class=n>system_message</span><span class=o>=</span><span class=s2>&quot;&quot;&quot;You handle general, non-technical support questions.</span>
<a id=__codelineno-5-119 name=__codelineno-5-119 href=#__codelineno-5-119></a><span class=s2>        Check context variables for user history before responding to provide</span>
<a id=__codelineno-5-120 name=__codelineno-5-120 href=#__codelineno-5-120></a><span class=s2>        a personalized experience.&quot;&quot;&quot;</span>
<a id=__codelineno-5-121 name=__codelineno-5-121 href=#__codelineno-5-121></a>    <span class=p>)</span>
<a id=__codelineno-5-122 name=__codelineno-5-122 href=#__codelineno-5-122></a>
<a id=__codelineno-5-123 name=__codelineno-5-123 href=#__codelineno-5-123></a><span class=c1># User agent</span>
<a id=__codelineno-5-124 name=__codelineno-5-124 href=#__codelineno-5-124></a><span class=n>user</span> <span class=o>=</span> <span class=n>ConversableAgent</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;user&quot;</span><span class=p>,</span> <span class=n>human_input_mode</span><span class=o>=</span><span class=s2>&quot;ALWAYS&quot;</span><span class=p>)</span>
<a id=__codelineno-5-125 name=__codelineno-5-125 href=#__codelineno-5-125></a>
<a id=__codelineno-5-126 name=__codelineno-5-126 href=#__codelineno-5-126></a><span class=c1># Set up the conversation pattern with context variables</span>
<a id=__codelineno-5-127 name=__codelineno-5-127 href=#__codelineno-5-127></a><span class=n>pattern</span> <span class=o>=</span> <span class=n>AutoPattern</span><span class=p>(</span>
<a id=__codelineno-5-128 name=__codelineno-5-128 href=#__codelineno-5-128></a>    <span class=n>initial_agent</span><span class=o>=</span><span class=n>triage_agent</span><span class=p>,</span>
<a id=__codelineno-5-129 name=__codelineno-5-129 href=#__codelineno-5-129></a>    <span class=n>agents</span><span class=o>=</span><span class=p>[</span><span class=n>triage_agent</span><span class=p>,</span> <span class=n>tech_agent</span><span class=p>,</span> <span class=n>general_agent</span><span class=p>],</span>
<a id=__codelineno-5-130 name=__codelineno-5-130 href=#__codelineno-5-130></a>    <span class=n>user_agent</span><span class=o>=</span><span class=n>user</span><span class=p>,</span>
<a id=__codelineno-5-131 name=__codelineno-5-131 href=#__codelineno-5-131></a>    <span class=n>context_variables</span><span class=o>=</span><span class=n>support_context</span><span class=p>,</span>  <span class=c1># Pass our initialized context</span>
<a id=__codelineno-5-132 name=__codelineno-5-132 href=#__codelineno-5-132></a>    <span class=n>group_manager_args</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;llm_config&quot;</span><span class=p>:</span> <span class=n>llm_config</span><span class=p>}</span>
<a id=__codelineno-5-133 name=__codelineno-5-133 href=#__codelineno-5-133></a><span class=p>)</span>
<a id=__codelineno-5-134 name=__codelineno-5-134 href=#__codelineno-5-134></a>
<a id=__codelineno-5-135 name=__codelineno-5-135 href=#__codelineno-5-135></a><span class=c1># Run the chat</span>
<a id=__codelineno-5-136 name=__codelineno-5-136 href=#__codelineno-5-136></a><span class=n>result</span><span class=p>,</span> <span class=n>final_context</span><span class=p>,</span> <span class=n>last_agent</span> <span class=o>=</span> <span class=n>initiate_group_chat</span><span class=p>(</span>
<a id=__codelineno-5-137 name=__codelineno-5-137 href=#__codelineno-5-137></a>    <span class=n>pattern</span><span class=o>=</span><span class=n>pattern</span><span class=p>,</span>
<a id=__codelineno-5-138 name=__codelineno-5-138 href=#__codelineno-5-138></a>    <span class=n>messages</span><span class=o>=</span><span class=s2>&quot;My laptop keeps shutting down randomly. Can you help?&quot;</span><span class=p>,</span>
<a id=__codelineno-5-139 name=__codelineno-5-139 href=#__codelineno-5-139></a>    <span class=n>max_rounds</span><span class=o>=</span><span class=mi>10</span>
<a id=__codelineno-5-140 name=__codelineno-5-140 href=#__codelineno-5-140></a><span class=p>)</span>
</code></pre></div> <h2 id=example-output>Example Output<a class=headerlink href=#example-output title="Permanent link">#</a></h2> <p>When you run this code, you'll see a workflow similar to this:</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Search for the string <strong>context_variables.to_dict()=</strong> in the example output to check the values of the context variables.</p> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=go>user (to chat_manager):</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=go>My laptop keeps shutting down randomly. Can you help?</span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=go>Next speaker: triage_agent</span>
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=go>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; USING AUTO REPLY...</span>
<a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=go>triage_agent (to chat_manager):</span>
<a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a>
<a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a><span class=go>***** Suggested tool call (call_rm3y9ld6FaHCZxrbg8vK0bFK): classify_and_log_query *****</span>
<a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=go>Arguments:</span>
<a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a><span class=go>{&quot;query&quot;:&quot;My laptop keeps shutting down randomly. Can you help?&quot;}</span>
<a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a><span class=go>***************************************************************************************</span>
<a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a>
<a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a>
<a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a><span class=go>Next speaker: _Group_Tool_Executor</span>
<a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a>
<a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a><span class=go>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; EXECUTING FUNCTION classify_and_log_query...</span>
<a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a><span class=go>Call ID: call_rm3y9ld6FaHCZxrbg8vK0bFK</span>
<a id=__codelineno-6-23 name=__codelineno-6-23 href=#__codelineno-6-23></a><span class=go>Input arguments: {&#39;query&#39;: &#39;My laptop keeps shutting down randomly. Can you help?&#39;}</span>
<a id=__codelineno-6-24 name=__codelineno-6-24 href=#__codelineno-6-24></a><span class=go>context_variables.to_dict()={&#39;session_start&#39;: &#39;2025-04-24T06:13:27.375733&#39;, &#39;query_history&#39;: [], &#39;solutions_provided&#39;: [], &#39;query_count&#39;: 0, &#39;solution_count&#39;: 0}</span>
<a id=__codelineno-6-25 name=__codelineno-6-25 href=#__codelineno-6-25></a><span class=go>context_variables.to_dict()={&#39;session_start&#39;: &#39;2025-04-24T06:13:27.375733&#39;, &#39;query_history&#39;: [{&#39;timestamp&#39;: &#39;2025-04-24T06:13:32.265286&#39;, &#39;query&#39;: &#39;My laptop keeps shutting down randomly. Can you help?&#39;}], &#39;solutions_provided&#39;: [], &#39;query_count&#39;: 1, &#39;solution_count&#39;: 0, &#39;last_query&#39;: &#39;My laptop keeps shutting down randomly. Can you help?&#39;, &#39;query_type&#39;: &#39;technical&#39;}</span>
<a id=__codelineno-6-26 name=__codelineno-6-26 href=#__codelineno-6-26></a><span class=go>_Group_Tool_Executor (to chat_manager):</span>
<a id=__codelineno-6-27 name=__codelineno-6-27 href=#__codelineno-6-27></a>
<a id=__codelineno-6-28 name=__codelineno-6-28 href=#__codelineno-6-28></a><span class=go>***** Response from calling tool (call_rm3y9ld6FaHCZxrbg8vK0bFK) *****</span>
<a id=__codelineno-6-29 name=__codelineno-6-29 href=#__codelineno-6-29></a><span class=go>This appears to be a technical issue. Routing to technical support...</span>
<a id=__codelineno-6-30 name=__codelineno-6-30 href=#__codelineno-6-30></a><span class=go>**********************************************************************</span>
<a id=__codelineno-6-31 name=__codelineno-6-31 href=#__codelineno-6-31></a>
<a id=__codelineno-6-32 name=__codelineno-6-32 href=#__codelineno-6-32></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-6-33 name=__codelineno-6-33 href=#__codelineno-6-33></a>
<a id=__codelineno-6-34 name=__codelineno-6-34 href=#__codelineno-6-34></a><span class=go>Next speaker: tech_agent</span>
<a id=__codelineno-6-35 name=__codelineno-6-35 href=#__codelineno-6-35></a>
<a id=__codelineno-6-36 name=__codelineno-6-36 href=#__codelineno-6-36></a><span class=go>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; USING AUTO REPLY...</span>
<a id=__codelineno-6-37 name=__codelineno-6-37 href=#__codelineno-6-37></a><span class=go>tech_agent (to chat_manager):</span>
<a id=__codelineno-6-38 name=__codelineno-6-38 href=#__codelineno-6-38></a>
<a id=__codelineno-6-39 name=__codelineno-6-39 href=#__codelineno-6-39></a><span class=go>***** Suggested tool call (call_FtIJ8KDaJpMxr4FRu93K8Vep): provide_technical_solution *****</span>
<a id=__codelineno-6-40 name=__codelineno-6-40 href=#__codelineno-6-40></a><span class=go>Arguments:</span>
<a id=__codelineno-6-41 name=__codelineno-6-41 href=#__codelineno-6-41></a><span class=go>{&quot;solution&quot;:&quot;If your laptop keeps shutting down randomly, it could be due to several reasons. Here are some steps to troubleshoot the issue:\n\n1. **Check for Overheating**: Ensure that your laptop is not overheating. Clean the air vents and make sure the laptop is on a hard surface to allow proper ventilation.\n\n2. **Inspect the Battery**: If the laptop is battery-operated, check the battery health. A failing battery can cause abrupt shutdowns. If possible, try running the laptop on AC power without the battery.\n\n3. **Update Drivers**: Ensure that all drivers, especially graphics and chipset drivers, are up to date. You can check the manufacturer&#39;s website for the latest updates.\n\n4. **Run a Malware Scan**: Sometimes, malware can cause system instability. Run a full scan using your antivirus software to eliminate this possibility.\n\n5. **Check Event Viewer**: Look at the Windows Event Viewer logs to see if there are any critical errors or warnings at the times of the shutdowns. \n\n6. **Run Hardware Diagnostics**: Many laptops come with built-in hardware diagnostics tools. Run these tests to check for failing components.\n\n7. **Reset BIOS/UEFI settings**: Sometimes incorrect settings in BIOS/UEFI can cause issues. Reset to default settings and see if the problem persists.\n\nIf none of the above steps resolve the issue, it might be a hardware failure, and I recommend contacting a professional technician for further diagnosis.&quot;}</span>
<a id=__codelineno-6-42 name=__codelineno-6-42 href=#__codelineno-6-42></a><span class=go>*******************************************************************************************</span>
<a id=__codelineno-6-43 name=__codelineno-6-43 href=#__codelineno-6-43></a>
<a id=__codelineno-6-44 name=__codelineno-6-44 href=#__codelineno-6-44></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-6-45 name=__codelineno-6-45 href=#__codelineno-6-45></a>
<a id=__codelineno-6-46 name=__codelineno-6-46 href=#__codelineno-6-46></a><span class=go>Next speaker: _Group_Tool_Executor</span>
<a id=__codelineno-6-47 name=__codelineno-6-47 href=#__codelineno-6-47></a>
<a id=__codelineno-6-48 name=__codelineno-6-48 href=#__codelineno-6-48></a><span class=go>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; EXECUTING FUNCTION provide_technical_solution...</span>
<a id=__codelineno-6-49 name=__codelineno-6-49 href=#__codelineno-6-49></a><span class=go>Call ID: call_FtIJ8KDaJpMxr4FRu93K8Vep</span>
<a id=__codelineno-6-50 name=__codelineno-6-50 href=#__codelineno-6-50></a><span class=go>Input arguments: {&#39;solution&#39;: &quot;If your laptop keeps shutting down randomly, it could be due to several reasons. Here are some steps to troubleshoot the issue:\n\n1. **Check for Overheating**: Ensure that your laptop is not overheating. Clean the air vents and make sure the laptop is on a hard surface to allow proper ventilation.\n\n2. **Inspect the Battery**: If the laptop is battery-operated, check the battery health. A failing battery can cause abrupt shutdowns. If possible, try running the laptop on AC power without the battery.\n\n3. **Update Drivers**: Ensure that all drivers, especially graphics and chipset drivers, are up to date. You can check the manufacturer&#39;s website for the latest updates.\n\n4. **Run a Malware Scan**: Sometimes, malware can cause system instability. Run a full scan using your antivirus software to eliminate this possibility.\n\n5. **Check Event Viewer**: Look at the Windows Event Viewer logs to see if there are any critical errors or warnings at the times of the shutdowns. \n\n6. **Run Hardware Diagnostics**: Many laptops come with built-in hardware diagnostics tools. Run these tests to check for failing components.\n\n7. **Reset BIOS/UEFI settings**: Sometimes incorrect settings in BIOS/UEFI can cause issues. Reset to default settings and see if the problem persists.\n\nIf none of the above steps resolve the issue, it might be a hardware failure, and I recommend contacting a professional technician for further diagnosis.&quot;}</span>
<a id=__codelineno-6-51 name=__codelineno-6-51 href=#__codelineno-6-51></a><span class=go>context_variables.to_dict()={&#39;session_start&#39;: &#39;2025-04-24T06:13:27.375733&#39;, &#39;query_history&#39;: [{&#39;timestamp&#39;: &#39;2025-04-24T06:13:32.265286&#39;, &#39;query&#39;: &#39;My laptop keeps shutting down randomly. Can you help?&#39;}], &#39;solutions_provided&#39;: [], &#39;query_count&#39;: 1, &#39;solution_count&#39;: 0, &#39;last_query&#39;: &#39;My laptop keeps shutting down randomly. Can you help?&#39;, &#39;query_type&#39;: &#39;technical&#39;}</span>
<a id=__codelineno-6-52 name=__codelineno-6-52 href=#__codelineno-6-52></a><span class=go>context_variables.to_dict()={&#39;session_start&#39;: &#39;2025-04-24T06:13:27.375733&#39;, &#39;query_history&#39;: [{&#39;timestamp&#39;: &#39;2025-04-24T06:13:32.265286&#39;, &#39;query&#39;: &#39;My laptop keeps shutting down randomly. Can you help?&#39;}], &#39;solutions_provided&#39;: [{&#39;timestamp&#39;: &#39;2025-04-24T06:13:39.729104&#39;, &#39;query&#39;: &#39;My laptop keeps shutting down randomly. Can you help?&#39;, &#39;solution&#39;: &quot;If your laptop keeps shutting down randomly, it could be due to several reasons. Here are some steps to troubleshoot the issue:\n\n1. **Check for Overheating**: Ensure that your laptop is not overheating. Clean the air vents and make sure the laptop is on a hard surface to allow proper ventilation.\n\n2. **Inspect the Battery**: If the laptop is battery-operated, check the battery health. A failing battery can cause abrupt shutdowns. If possible, try running the laptop on AC power without the battery.\n\n3. **Update Drivers**: Ensure that all drivers, especially graphics and chipset drivers, are up to date. You can check the manufacturer&#39;s website for the latest updates.\n\n4. **Run a Malware Scan**: Sometimes, malware can cause system instability. Run a full scan using your antivirus software to eliminate this possibility.\n\n5. **Check Event Viewer**: Look at the Windows Event Viewer logs to see if there are any critical errors or warnings at the times of the shutdowns. \n\n6. **Run Hardware Diagnostics**: Many laptops come with built-in hardware diagnostics tools. Run these tests to check for failing components.\n\n7. **Reset BIOS/UEFI settings**: Sometimes incorrect settings in BIOS/UEFI can cause issues. Reset to default settings and see if the problem persists.\n\nIf none of the above steps resolve the issue, it might be a hardware failure, and I recommend contacting a professional technician for further diagnosis.&quot;}], &#39;query_count&#39;: 1, &#39;solution_count&#39;: 1, &#39;last_query&#39;: &#39;My laptop keeps shutting down randomly. Can you help?&#39;, &#39;query_type&#39;: &#39;technical&#39;, &#39;last_solution&#39;: &quot;If your laptop keeps shutting down randomly, it could be due to several reasons. Here are some steps to troubleshoot the issue:\n\n1. **Check for Overheating**: Ensure that your laptop is not overheating. Clean the air vents and make sure the laptop is on a hard surface to allow proper ventilation.\n\n2. **Inspect the Battery**: If the laptop is battery-operated, check the battery health. A failing battery can cause abrupt shutdowns. If possible, try running the laptop on AC power without the battery.\n\n3. **Update Drivers**: Ensure that all drivers, especially graphics and chipset drivers, are up to date. You can check the manufacturer&#39;s website for the latest updates.\n\n4. **Run a Malware Scan**: Sometimes, malware can cause system instability. Run a full scan using your antivirus software to eliminate this possibility.\n\n5. **Check Event Viewer**: Look at the Windows Event Viewer logs to see if there are any critical errors or warnings at the times of the shutdowns. \n\n6. **Run Hardware Diagnostics**: Many laptops come with built-in hardware diagnostics tools. Run these tests to check for failing components.\n\n7. **Reset BIOS/UEFI settings**: Sometimes incorrect settings in BIOS/UEFI can cause issues. Reset to default settings and see if the problem persists.\n\nIf none of the above steps resolve the issue, it might be a hardware failure, and I recommend contacting a professional technician for further diagnosis.&quot;}</span>
<a id=__codelineno-6-53 name=__codelineno-6-53 href=#__codelineno-6-53></a><span class=go>_Group_Tool_Executor (to chat_manager):</span>
<a id=__codelineno-6-54 name=__codelineno-6-54 href=#__codelineno-6-54></a>
<a id=__codelineno-6-55 name=__codelineno-6-55 href=#__codelineno-6-55></a><span class=go>***** Response from calling tool (call_FtIJ8KDaJpMxr4FRu93K8Vep) *****</span>
<a id=__codelineno-6-56 name=__codelineno-6-56 href=#__codelineno-6-56></a><span class=go>If your laptop keeps shutting down randomly, it could be due to several reasons. Here are some steps to troubleshoot the issue:</span>
<a id=__codelineno-6-57 name=__codelineno-6-57 href=#__codelineno-6-57></a>
<a id=__codelineno-6-58 name=__codelineno-6-58 href=#__codelineno-6-58></a><span class=go>1. **Check for Overheating**: Ensure that your laptop is not overheating. Clean the air vents and make sure the laptop is on a hard surface to allow proper ventilation.</span>
<a id=__codelineno-6-59 name=__codelineno-6-59 href=#__codelineno-6-59></a>
<a id=__codelineno-6-60 name=__codelineno-6-60 href=#__codelineno-6-60></a><span class=go>2. **Inspect the Battery**: If the laptop is battery-operated, check the battery health. A failing battery can cause abrupt shutdowns. If possible, try running the laptop on AC power without the battery.</span>
<a id=__codelineno-6-61 name=__codelineno-6-61 href=#__codelineno-6-61></a>
<a id=__codelineno-6-62 name=__codelineno-6-62 href=#__codelineno-6-62></a><span class=go>3. **Update Drivers**: Ensure that all drivers, especially graphics and chipset drivers, are up to date. You can check the manufacturer&#39;s website for the latest updates.</span>
<a id=__codelineno-6-63 name=__codelineno-6-63 href=#__codelineno-6-63></a>
<a id=__codelineno-6-64 name=__codelineno-6-64 href=#__codelineno-6-64></a><span class=go>4. **Run a Malware Scan**: Sometimes, malware can cause system instability. Run a full scan using your antivirus software to eliminate this possibility.</span>
<a id=__codelineno-6-65 name=__codelineno-6-65 href=#__codelineno-6-65></a>
<a id=__codelineno-6-66 name=__codelineno-6-66 href=#__codelineno-6-66></a><span class=go>5. **Check Event Viewer**: Look at the Windows Event Viewer logs to see if there are any critical errors or warnings at the times of the shutdowns.</span>
<a id=__codelineno-6-67 name=__codelineno-6-67 href=#__codelineno-6-67></a>
<a id=__codelineno-6-68 name=__codelineno-6-68 href=#__codelineno-6-68></a><span class=go>6. **Run Hardware Diagnostics**: Many laptops come with built-in hardware diagnostics tools. Run these tests to check for failing components.</span>
<a id=__codelineno-6-69 name=__codelineno-6-69 href=#__codelineno-6-69></a>
<a id=__codelineno-6-70 name=__codelineno-6-70 href=#__codelineno-6-70></a><span class=go>7. **Reset BIOS/UEFI settings**: Sometimes incorrect settings in BIOS/UEFI can cause issues. Reset to default settings and see if the problem persists.</span>
<a id=__codelineno-6-71 name=__codelineno-6-71 href=#__codelineno-6-71></a>
<a id=__codelineno-6-72 name=__codelineno-6-72 href=#__codelineno-6-72></a><span class=go>If none of the above steps resolve the issue, it might be a hardware failure, and I recommend contacting a professional technician for further diagnosis.</span>
<a id=__codelineno-6-73 name=__codelineno-6-73 href=#__codelineno-6-73></a><span class=go>**********************************************************************</span>
<a id=__codelineno-6-74 name=__codelineno-6-74 href=#__codelineno-6-74></a>
<a id=__codelineno-6-75 name=__codelineno-6-75 href=#__codelineno-6-75></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-6-76 name=__codelineno-6-76 href=#__codelineno-6-76></a>
<a id=__codelineno-6-77 name=__codelineno-6-77 href=#__codelineno-6-77></a><span class=go>Next speaker: tech_agent</span>
<a id=__codelineno-6-78 name=__codelineno-6-78 href=#__codelineno-6-78></a>
<a id=__codelineno-6-79 name=__codelineno-6-79 href=#__codelineno-6-79></a><span class=go>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; USING AUTO REPLY...</span>
<a id=__codelineno-6-80 name=__codelineno-6-80 href=#__codelineno-6-80></a><span class=go>tech_agent (to chat_manager):</span>
<a id=__codelineno-6-81 name=__codelineno-6-81 href=#__codelineno-6-81></a>
<a id=__codelineno-6-82 name=__codelineno-6-82 href=#__codelineno-6-82></a><span class=go>I&#39;ve provided a detailed troubleshooting guide for your laptop&#39;s random shutdown issue. Here are the steps you can take:</span>
<a id=__codelineno-6-83 name=__codelineno-6-83 href=#__codelineno-6-83></a>
<a id=__codelineno-6-84 name=__codelineno-6-84 href=#__codelineno-6-84></a><span class=go>1. **Check for Overheating**: Ensure that your laptop is not overheating. Clean the air vents and make sure the laptop is on a hard surface to allow proper ventilation.</span>
<a id=__codelineno-6-85 name=__codelineno-6-85 href=#__codelineno-6-85></a>
<a id=__codelineno-6-86 name=__codelineno-6-86 href=#__codelineno-6-86></a><span class=go>2. **Inspect the Battery**: If the laptop is battery-operated, check the battery health. A failing battery can cause abrupt shutdowns. If possible, try running the laptop on AC power without the battery.</span>
<a id=__codelineno-6-87 name=__codelineno-6-87 href=#__codelineno-6-87></a>
<a id=__codelineno-6-88 name=__codelineno-6-88 href=#__codelineno-6-88></a><span class=go>3. **Update Drivers**: Ensure that all drivers, especially graphics and chipset drivers, are up to date. You can check the manufacturer&#39;s website for the latest updates.</span>
<a id=__codelineno-6-89 name=__codelineno-6-89 href=#__codelineno-6-89></a>
<a id=__codelineno-6-90 name=__codelineno-6-90 href=#__codelineno-6-90></a><span class=go>4. **Run a Malware Scan**: Sometimes, malware can cause system instability. Run a full scan using your antivirus software to eliminate this possibility.</span>
<a id=__codelineno-6-91 name=__codelineno-6-91 href=#__codelineno-6-91></a>
<a id=__codelineno-6-92 name=__codelineno-6-92 href=#__codelineno-6-92></a><span class=go>5. **Check Event Viewer**: Look at the Windows Event Viewer logs to see if there are any critical errors or warnings at the times of the shutdowns.</span>
<a id=__codelineno-6-93 name=__codelineno-6-93 href=#__codelineno-6-93></a>
<a id=__codelineno-6-94 name=__codelineno-6-94 href=#__codelineno-6-94></a><span class=go>6. **Run Hardware Diagnostics**: Many laptops come with built-in hardware diagnostics tools. Run these tests to check for failing components.</span>
<a id=__codelineno-6-95 name=__codelineno-6-95 href=#__codelineno-6-95></a>
<a id=__codelineno-6-96 name=__codelineno-6-96 href=#__codelineno-6-96></a><span class=go>7. **Reset BIOS/UEFI settings**: Sometimes incorrect settings in BIOS/UEFI can cause issues. Reset to default settings and see if the problem persists.</span>
<a id=__codelineno-6-97 name=__codelineno-6-97 href=#__codelineno-6-97></a>
<a id=__codelineno-6-98 name=__codelineno-6-98 href=#__codelineno-6-98></a><span class=go>If none of the above steps resolve the issue, it might be a hardware failure, and I recommend contacting a professional technician for further diagnosis.</span>
<a id=__codelineno-6-99 name=__codelineno-6-99 href=#__codelineno-6-99></a>
<a id=__codelineno-6-100 name=__codelineno-6-100 href=#__codelineno-6-100></a><span class=go>--------------------------------------------------------------------------------</span>
<a id=__codelineno-6-101 name=__codelineno-6-101 href=#__codelineno-6-101></a>
<a id=__codelineno-6-102 name=__codelineno-6-102 href=#__codelineno-6-102></a><span class=go>Next speaker: user</span>
<a id=__codelineno-6-103 name=__codelineno-6-103 href=#__codelineno-6-103></a>
<a id=__codelineno-6-104 name=__codelineno-6-104 href=#__codelineno-6-104></a><span class=go>Replying as user. Provide feedback to chat_manager. Press enter to skip and use auto-reply, or type &#39;exit&#39; to end the conversation: exit</span>
<a id=__codelineno-6-105 name=__codelineno-6-105 href=#__codelineno-6-105></a>
<a id=__codelineno-6-106 name=__codelineno-6-106 href=#__codelineno-6-106></a><span class=go>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; TERMINATING RUN (0c4282a0-6a3b-49fa-b8e7-b962273a777a): User requested to end the conversation</span>
<a id=__codelineno-6-107 name=__codelineno-6-107 href=#__codelineno-6-107></a>
<a id=__codelineno-6-108 name=__codelineno-6-108 href=#__codelineno-6-108></a><span class=go>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; TERMINATING RUN (38356a45-e550-4e8f-9d3e-d7b07461b646): No reply generated</span>
</code></pre></div> <h2 id=next-steps>Next Steps<a class=headerlink href=#next-steps title="Permanent link">#</a></h2> <p>Now that you understand Context Variables, the next section will explore Handoffs and Transitions - the mechanisms that control how agents pass control to each other in a group chat.</p> <p>In the Handoffs and Transitions section, you'll learn:</p> <ul> <li>How to define explicit handoff conditions between agents</li> <li>How to use context variables to drive dynamic transitions</li> <li>How to implement complex workflows with conditional branching</li> <li>How to combine tools, context variables, and handoffs for sophisticated agent orchestration</li> </ul> <p>The concepts you've learned about tools and context variables will be essential as we explore how to control the flow of conversation in complex multi-agent systems.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2025-05-08T13:42:16+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2025-05-08</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../agent-tools-functions/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Tools and Functions"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Tools and Functions </div> </div> </a> <a href=../handoffs/ class="md-footer__link md-footer__link--next" aria-label="Next: Handoffs"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Handoffs </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy; 2025 <a href=https://ag2.ai/ target=_blank rel=noopener>ag2</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://discord.gg/pAbnFJrkgZ target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg> </a> <a href=https://github.com/ag2ai/ag2 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg> </a> <a href=https://x.com/ag2oss target=_blank rel=noopener title=x.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg> </a> <a href=https://www.youtube.com/@ag2ai target=_blank rel=noopener title=www.youtube.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg> </a> <a href=https://www.linkedin.com/company/ag2ai target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../../..", "features": ["search.suggest", "search.highlight", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.tracking", "navigation.prune", "navigation.top", "navigation.footer", "content.tabs.link", "content.code.copy", "content.code.annotate", "content.action.edit"], "search": "../../../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../../../../../js/timeago.min.js></script> <script src=../../../../../../js/timeago_mkdocs_material.js></script> <script src=../../../../../../javascripts/extra.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>