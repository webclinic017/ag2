<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A programming framework for agentic AI"><meta name=author content="Chi Wang & Qingyun Wu"><link href=https://docs.ag2.ai/latest/docs/user-guide/advanced-concepts/realtime-agent/twilio/ rel=canonical><link href=../webrtc/ rel=prev><link href=../../rag/ rel=next><link rel=icon href=../../../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>RealtimeAgent over Twilio Audio Adapter - AG2</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../css/timeago.css><link rel=stylesheet href=../../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../../stylesheets/extra.ff0633.min.css><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-2GN2KN2CE4"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-2GN2KN2CE4",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-2GN2KN2CE4",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta http-equiv=Cache-Control content="no-cache, no-store, must-revalidate"><meta property=og:type content=website><meta property=og:title content="AG2 - RealtimeAgent over Twilio Audio Adapter"><meta property=og:description content="A programming framework for agentic AI"><meta content=https://docs.ag2.ai/latest/docs/user-guide/advanced-concepts/realtime-agent/twilio/ property=og:url><meta property=og:image content=https://opengraph.githubassets.com/1671805243.560327/ag2ai/ag2><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="AG2 - RealtimeAgent over Twilio Audio Adapter"><meta name=twitter:description content="A programming framework for agentic AI"><meta name=twitter:image content=https://opengraph.githubassets.com/1671805243.560327/ag2ai/ag2><link rel=icon href=https://docs.ag2.ai/latest/assets/img/favicon.svg type=image/x-icon><link rel=icon href=https://docs.ag2.ai/latest/assets/img/favicon-dark.svg type=image/x-icon media="(prefers-color-scheme: light)"><link rel=icon href=https://docs.ag2.ai/latest/assets/img/favicon.svg type=image/x-icon media="(prefers-color-scheme: dark)"><link href=../../../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src=../../../../../assets/javascripts/glightbox.min.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#key-features-of-realtimeagent class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../../../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../.. title=AG2 class="md-header__button md-logo" aria-label=AG2 data-md-component=logo> <img src=../../../../../assets/img/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AG2 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> RealtimeAgent over Twilio Audio Adapter </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ag2ai/ag2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ag2ai/ag2 </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../../quick-start/ class=md-tabs__link> Quick Start </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../../basic-concepts/installing-ag2/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../../../api-reference/autogen/Agent/ class=md-tabs__link> API References </a> </li> <li class=md-tabs__item> <a href=../../../../contributor-guide/contributing/ class=md-tabs__link> Contributor Guide </a> </li> <li class=md-tabs__item> <a href=../../../../ecosystem/agentops/ class=md-tabs__link> Ecosystem </a> </li> <li class=md-tabs__item> <a href=../../../../use-cases/use-cases/customer-service/ class=md-tabs__link> Use Cases </a> </li> <li class=md-tabs__item> <a href=../../../../user-stories/2025-04-30-Cegid-Pulse-OS/cegid_pulse_os/ class=md-tabs__link> Community Insights </a> </li> <li class=md-tabs__item> <a href=../../../../blog/ class=md-tabs__link> Blog </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../.. title=AG2 class="md-nav__button md-logo" aria-label=AG2 data-md-component=logo> <img src=../../../../../assets/img/logo.svg alt=logo> </a> AG2 </label> <div class=md-nav__source> <a href=https://github.com/ag2ai/ag2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ag2ai/ag2 </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../quick-start/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../basic-concepts/installing-ag2/ class=md-nav__link> <span class=md-ellipsis> Installing AG2 </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../basic-concepts/overview/ class=md-nav__link> <span class=md-ellipsis> Basic Concepts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Advanced Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Advanced Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../llm-configuration-deep-dive/ class=md-nav__link> <span class=md-ellipsis> LLM Configuration Deep Dive </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../orchestration/orchestrations/ class=md-nav__link> <span class=md-ellipsis> Agent Orchestration Deep Dive </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tools/ class=md-nav__link> <span class=md-ellipsis> Tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_4 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> RealtimeAgent </span> </a> <label class="md-nav__link " for=__nav_2_3_4 id=__nav_2_3_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_4_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3_4> <span class="md-nav__icon md-icon"></span> RealtimeAgent </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../websocket/ class=md-nav__link> <span class=md-ellipsis> WebSocket Audio Adapter </span> </a> </li> <li class=md-nav__item> <a href=../webrtc/ class=md-nav__link> <span class=md-ellipsis> WebRTC Integration </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Twilio Audio Adapter </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Twilio Audio Adapter </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#key-features-of-realtimeagent class=md-nav__link> <span class=md-ellipsis> Key Features of RealtimeAgent </span> </a> </li> <li class=md-nav__item> <a href=#real-world-applications class=md-nav__link> <span class=md-ellipsis> Real-World Applications </span> </a> </li> <li class=md-nav__item> <a href=#tutorial-integrating-realtimeagent-with-swarm-teams class=md-nav__link> <span class=md-ellipsis> Tutorial: Integrating RealtimeAgent with Swarm Teams </span> </a> </li> <li class=md-nav__item> <a href=#swarm-implementation-for-airline-customer-service class=md-nav__link> <span class=md-ellipsis> Swarm Implementation for Airline Customer Service </span> </a> </li> <li class=md-nav__item> <a href=#connecting-the-swarm-to-the-realtimeagent class=md-nav__link> <span class=md-ellipsis> Connecting the Swarm to the RealtimeAgent </span> </a> </li> <li class=md-nav__item> <a href=#results-running-the-service class=md-nav__link> <span class=md-ellipsis> Results: Running the Service </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../rag/ class=md-nav__link> <span class=md-ellipsis> RAG </span> </a> </li> <li class=md-nav__item> <a href=../../code-execution/ class=md-nav__link> <span class=md-ellipsis> Code Execution </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../models/amazon-bedrock/ class=md-nav__link> <span class=md-ellipsis> Model Providers </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../reference-agents/ class=md-nav__link> <span class=md-ellipsis> Reference Agents </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../reference-tools/ class=md-nav__link> <span class=md-ellipsis> Reference Tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../../../faq/FAQ/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../api-reference/autogen/Agent/ class=md-nav__link> <span class=md-ellipsis> API References </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../contributor-guide/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributor Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../ecosystem/agentops/ class=md-nav__link> <span class=md-ellipsis> Ecosystem </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../use-cases/use-cases/customer-service/ class=md-nav__link> <span class=md-ellipsis> Use Cases </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../user-stories/2025-04-30-Cegid-Pulse-OS/cegid_pulse_os/ class=md-nav__link> <span class=md-ellipsis> Community Insights </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../blog/ class=md-nav__link> <span class=md-ellipsis> Blog </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#key-features-of-realtimeagent class=md-nav__link> <span class=md-ellipsis> Key Features of RealtimeAgent </span> </a> </li> <li class=md-nav__item> <a href=#real-world-applications class=md-nav__link> <span class=md-ellipsis> Real-World Applications </span> </a> </li> <li class=md-nav__item> <a href=#tutorial-integrating-realtimeagent-with-swarm-teams class=md-nav__link> <span class=md-ellipsis> Tutorial: Integrating RealtimeAgent with Swarm Teams </span> </a> </li> <li class=md-nav__item> <a href=#swarm-implementation-for-airline-customer-service class=md-nav__link> <span class=md-ellipsis> Swarm Implementation for Airline Customer Service </span> </a> </li> <li class=md-nav__item> <a href=#connecting-the-swarm-to-the-realtimeagent class=md-nav__link> <span class=md-ellipsis> Connecting the Swarm to the RealtimeAgent </span> </a> </li> <li class=md-nav__item> <a href=#results-running-the-service class=md-nav__link> <span class=md-ellipsis> Results: Running the Service </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ag2ai/ag2/edit/main/website/docs/user-guide/advanced-concepts/realtime-agent/twilio.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m7 14.94 6.06-6.06 2.06 2.06L9.06 17H7zM12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m4.7-10.65-1 1-2.05-2.05 1-1c.21-.22.56-.22.77 0l1.28 1.28c.22.21.22.56 0 .77M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2"/></svg> </a> <h1>Twilio Audio Adapter</h1> <p>Traditionally, conversational AI tasks have focused on asynchronous interactions, such as text-based chats. However, the demand for <strong>real-time voice agents</strong> has surged in domains like customer support, healthcare, and virtual assistance. With this update, AG2 takes a leap forward by enabling agents to:</p> <ol> <li> <p><strong>Support Real-Time Voice Interactions</strong> Engage in real-time conversations with users.</p> </li> <li> <p><strong>Leverage Swarm Teams for Task Delegation</strong> Delegate complex tasks to AG2 Swarm teams during a voice interaction, ensuring efficient task management.</p> </li> <li> <p><strong>Provide Developer-Friendly Integration</strong> Tutorial and streamlined API to make setting up real-time agents more straightforward for developers.</p> </li> </ol> <h3 id=key-features-of-realtimeagent><strong>Key Features of RealtimeAgent</strong><a class=headerlink href=#key-features-of-realtimeagent title="Permanent link">#</a></h3> <ol> <li> <p><strong><a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a></strong></p> <ul> <li>Acts as the central interface for handling real-time interactions.</li> <li>Bridges voice input/output with AG2’s task-handling capabilities.</li> </ul> </li> <li> <p>RealtimeAgent swarm integration</p> <ul> <li>Seamless integration of <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a> into Swarm</li> </ul> </li> <li> <p><a href=../../../../api-reference/autogen/agentchat/realtime/experimental/TwilioAudioAdapter#autogen.agentchat.realtime.experimental.TwilioAudioAdapter.twilioaudioadapter><strong><code>TwilioAudioAdapter</code></strong></a></p> <ul> <li>Connects agents to Twilio for telephony support.</li> <li>Simplifies the process of handling voice calls with clear API methods.</li> </ul> </li> </ol> <h3 id=real-world-applications><strong>Real-World Applications</strong><a class=headerlink href=#real-world-applications title="Permanent link">#</a></h3> <p>Here’s how <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a> transforms use cases:</p> <ul> <li><strong>Customer Support</strong>: Enable agents to answer customer queries in real time while delegating complex tasks to a Swarm team.</li> <li><strong>Healthcare</strong>: Facilitate real-time interactions between patients and medical AI assistants with immediate task handoffs.</li> <li><strong>Virtual Assistance</strong>: Create voice-activated personal assistants that can handle scheduling, reminders, and more.</li> </ul> <h3 id=tutorial-integrating-realtimeagent-with-swarm-teams><strong>Tutorial: Integrating RealtimeAgent with Swarm Teams</strong><a class=headerlink href=#tutorial-integrating-realtimeagent-with-swarm-teams title="Permanent link">#</a></h3> <p>In this tutorial, we’ll demonstrate how to implement OpenAI's <a href=https://github.com/openai/swarm/tree/main/examples/airline>Airline Customer Service Example</a> using AG2's new <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a>. By leveraging real-time capabilities, you can create a seamless voice-driven experience for customer service tasks, enhanced with Swarm's task orchestration for efficient problem-solving.</p> <p>This guide will walk you through the setup, implementation, and connection process, ensuring you’re ready to build real-time conversational agents with ease.</p> <h4 id=general-overview>General overview<a class=headerlink href=#general-overview title="Permanent link">#</a></h4> <p>To illustrate the system, the diagram below provides a high-level view of how the Realtime Agent collaborates with a swarm of specialized agents to handle customer service tasks.</p> <p><img alt="Realtime Agent Swarm" src=../../../../../snippets/advanced-concepts/realtime-agent/img/realtime_agent_swarm.png></p> <ol> <li> <p><strong>Twilio Integration:</strong> The user begins the interaction by placing a voice call via Twilio. Twilio handles the audio transmission and forwards the conversation to the Realtime Agent, enabling real-time processing of the user’s request.</p> </li> <li> <p><strong>Realtime Agent Coordination:</strong> At the heart of the system, the Realtime Agent leverages OpenAI’s Realtime API to understand and manage the user’s intent dynamically. It facilitates the conversation and ensures the user’s query is routed correctly within the swarm.</p> </li> <li> <p><strong>Specialized Agents in the Swarm:</strong></p> </li> <li> <p>The <strong>Triage Agent</strong> acts as the gateway, identifying the nature of the request—such as a flight change or cancellation—and handing it off to the relevant specialized agent.</p> </li> <li> <p>For example, a <strong>Flight Change Agent</strong> processes requests to modify a booking, while a <strong>Flight Cancellation Agent</strong> handles cancellations and refunds.</p> </li> <li> <p><strong>Interactive Feedback Loop:</strong> Throughout the interaction, agents communicate with the user through the Realtime Agent, asking clarifying questions or providing status updates. Each agent follows strict policies to ensure consistent and reliable service.</p> </li> <li> <p><strong>Task Completion:</strong> Once the task is complete—such as changing a flight or issuing a refund—the system confirms the resolution with the user and ensures there are no additional queries before closing the case.</p> </li> </ol> <h4 id=prerequisites><strong>Prerequisites</strong><a class=headerlink href=#prerequisites title="Permanent link">#</a></h4> <p>Before we begin, ensure you have the following set up:</p> <ol> <li><a href=https://ngrok.com/ ><strong>Ngrok</strong></a>: Exposing your local service to the web for Twilio integration.</li> <li><a href=https://www.twilio.com/ ><strong>Twilio</strong></a>: Setting up Twilio for telephony connectivity.</li> </ol> <h4 id=ngrok-setup>Ngrok setup<a class=headerlink href=#ngrok-setup title="Permanent link">#</a></h4> <p>To enable Twilio to interact with your local server, you’ll need to expose it to the public internet. Twilio requires a public URL to send requests to your server and receive real-time instructions.</p> <p>For this guide, we’ll use <strong>ngrok</strong>, a popular tunneling service, to make your local server accessible. Alternatively, you can use other reverse proxy or tunneling options, such as a virtual private server (VPS).</p> <h5 id=step-1-install-ngrok>Step 1: Install Ngrok<a class=headerlink href=#step-1-install-ngrok title="Permanent link">#</a></h5> <p>If you haven’t already, download and install <strong>ngrok</strong> from their <a href=https://ngrok.com/downloads>official website</a>. Follow the instructions for your operating system to set it up.</p> <h5 id=step-2-start-the-tunnel>Step 2: Start the Tunnel<a class=headerlink href=#step-2-start-the-tunnel title="Permanent link">#</a></h5> <p>Run the following command to expose your local server on port <code>5050</code> (or the port your server uses):</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>ngrok<span class=w> </span>http<span class=w> </span><span class=m>5050</span>
</code></pre></div> <p>If you’ve configured your server to use a different port, replace <code>5050</code> with the correct port number in the command.</p> <h5 id=step-3-retrieve-your-public-url>Step 3: Retrieve Your Public URL<a class=headerlink href=#step-3-retrieve-your-public-url title="Permanent link">#</a></h5> <p>After running the command, <strong>ngrok</strong> will display a public URL in your terminal. It will look something like this:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>Forwarding                    https://abc123.ngrok.io -&gt; http://localhost:5050
</code></pre></div> <p>Copy this public URL (e.g., <code>https://abc123.ngrok.io</code>). You will use it in Twilio’s configuration to route incoming requests to your server.</p> <p>With your public URL set up, you’re ready to configure Twilio to send requests to your server!</p> <h4 id=twilio-setup><strong>Twilio Setup</strong><a class=headerlink href=#twilio-setup title="Permanent link">#</a></h4> <p>To connect Twilio with your <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a>, follow these steps:</p> <ol> <li> <p><strong>Create a Twilio Account</strong> If you don’t already have a Twilio account, you can <a href=https://login.twilio.com/u/signup>sign up here</a>. Twilio offers trial accounts, which are perfect for testing purposes.</p> </li> <li> <p><strong>Navigate to Phone Numbers</strong> <img alt="Twilio endpoint config" src=../../../../../snippets/advanced-concepts/realtime-agent/img/twilio_phone_numbers.png></p> </li> <li> <p><strong>Access Your Voice-Enabled Number</strong> Log in to the <strong>Twilio Console</strong> and select your <strong>Voice-enabled phone number</strong>.</p> </li> <li> <p><strong>Configure the Webhook</strong></p> </li> <li> <p>Navigate to the <strong>Voice &amp; Fax</strong> section under your number’s settings.</p> </li> <li>Set the <strong>A CALL COMES IN</strong> webhook to your public <strong>ngrok</strong> URL.</li> <li> <p>Append <code>/incoming-call</code> to the URL. For example:</p> <ul> <li>If your ngrok URL is <code>https://abc123.ngrok.app</code>, the webhook URL should be: <code>https://abc123.ngrok.app/incoming-call</code></li> </ul> </li> </ol> <p><img alt="Twilio endpoint config" src=../../../../../snippets/advanced-concepts/realtime-agent/img/twilio_endpoint_config.png></p> <ol> <li><strong>Save Changes</strong> Once the webhook URL is set, save your changes.</li> </ol> <p>You’re now ready to test the integration between Twilio and your <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a>!</p> <h3 id=swarm-implementation-for-airline-customer-service><strong>Swarm Implementation for Airline Customer Service</strong><a class=headerlink href=#swarm-implementation-for-airline-customer-service title="Permanent link">#</a></h3> <p>In this section, we’ll configure a Swarm to handle airline customer service tasks, such as flight changes and cancellations. This implementation builds upon the <a href=../../../../use-cases/notebooks/notebooks/agentchat_swarm>original Swarm example notebook</a>, which we’ve adapted to work seamlessly with the <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a> acting as a <a href=../../../../api-reference/autogen/UserProxyAgent><strong><code>UserProxyAgent</code></strong></a>.</p> <p>You can explore and run the complete implementation of the <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a> demonstrated here by visiting <a href=../../../../use-cases/notebooks/notebooks/agentchat_realtime_swarm>this notebook</a>.</p> <p>For the sake of brevity, we’ll focus on the key sections of the Swarm setup in this blog post, highlighting the essential components.</p> <p>Below are the key parts of the Swarm setup, accompanied by concise comments to clarify their purpose and functionality.</p> <h4 id=policy-definitions><strong>Policy Definitions</strong><a class=headerlink href=#policy-definitions title="Permanent link">#</a></h4> <p><div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=n>FLIGHT_CANCELLATION_POLICY</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=s2>1. Confirm which flight the customer is asking to cancel.</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=s2>2. Confirm refund or flight credits and proceed accordingly.</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=s2>...</span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=s2>&quot;&quot;&quot;</span>
</code></pre></div> - <strong>Purpose:</strong> Defines the detailed step-by-step process for specific tasks like flight cancellations. - <strong>Usage:</strong> Used as part of the agent's <code>system_message</code> to guide its behavior.</p> <h4 id=agents-definition><strong>Agents Definition</strong><a class=headerlink href=#agents-definition title="Permanent link">#</a></h4> <p><div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=n>triage_agent</span> <span class=o>=</span> <span class=n>ConversableAgent</span><span class=p>(</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;Triage_Agent&quot;</span><span class=p>,</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>    <span class=n>system_message</span><span class=o>=</span><span class=n>triage_instructions</span><span class=p>(</span><span class=n>context_variables</span><span class=o>=</span><span class=n>context_variables</span><span class=p>),</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>    <span class=n>llm_config</span><span class=o>=</span><span class=n>llm_config</span><span class=p>,</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>    <span class=n>functions</span><span class=o>=</span><span class=p>[</span><span class=n>non_flight_enquiry</span><span class=p>],</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=p>)</span>
</code></pre></div> - <strong>Triage Agent:</strong> Routes the user's request to the appropriate specialized agent based on the topic.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=n>flight_cancel</span> <span class=o>=</span> <span class=n>ConversableAgent</span><span class=p>(</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;Flight_Cancel_Traversal&quot;</span><span class=p>,</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>    <span class=n>system_message</span><span class=o>=</span><span class=n>STARTER_PROMPT</span> <span class=o>+</span> <span class=n>FLIGHT_CANCELLATION_POLICY</span><span class=p>,</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>    <span class=n>llm_config</span><span class=o>=</span><span class=n>llm_config</span><span class=p>,</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>    <span class=n>functions</span><span class=o>=</span><span class=p>[</span><span class=n>initiate_refund</span><span class=p>,</span> <span class=n>initiate_flight_credits</span><span class=p>,</span> <span class=n>case_resolved</span><span class=p>,</span> <span class=n>escalate_to_agent</span><span class=p>],</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=p>)</span>
</code></pre></div> - <strong>Flight Cancel Agent:</strong> Handles cancellations, including refunds and flight credits, while ensuring policy steps are strictly followed.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=n>register_hand_off</span><span class=p>(</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>    <span class=n>agent</span><span class=o>=</span><span class=n>flight_modification</span><span class=p>,</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>    <span class=n>hand_to</span><span class=o>=</span><span class=p>[</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>        <span class=n>OnCondition</span><span class=p>(</span><span class=n>flight_cancel</span><span class=p>,</span> <span class=s2>&quot;To cancel a flight&quot;</span><span class=p>),</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>        <span class=n>OnCondition</span><span class=p>(</span><span class=n>flight_change</span><span class=p>,</span> <span class=s2>&quot;To change a flight&quot;</span><span class=p>),</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>    <span class=p>]</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=p>)</span>
</code></pre></div> - <strong>Nested Handoffs:</strong> Further refines routing, enabling deeper task-specific flows like cancellations or changes.</p> <h4 id=utility-functions><strong>Utility Functions</strong><a class=headerlink href=#utility-functions title="Permanent link">#</a></h4> <p><div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=k>def</span><span class=w> </span><span class=nf>escalate_to_agent</span><span class=p>(</span><span class=n>reason</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Escalates the interaction to a human agent if required.&quot;&quot;&quot;</span>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>    <span class=k>return</span> <span class=sa>f</span><span class=s2>&quot;Escalating to agent: </span><span class=si>{</span><span class=n>reason</span><span class=si>}</span><span class=s2>&quot;</span> <span class=k>if</span> <span class=n>reason</span> <span class=k>else</span> <span class=s2>&quot;Escalating to agent&quot;</span>
</code></pre></div> - <strong>Purpose:</strong> Ensures seamless fallback to human agents when automated handling is insufficient.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=k>def</span><span class=w> </span><span class=nf>initiate_refund</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Handles initiating a refund process.&quot;&quot;&quot;</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>    <span class=k>return</span> <span class=s2>&quot;Refund initiated&quot;</span>
</code></pre></div> - <strong>Task-Specific:</strong> Simplifies complex actions into modular, reusable functions.</p> <h3 id=connecting-the-swarm-to-the-realtimeagent><strong>Connecting the Swarm to the RealtimeAgent</strong><a class=headerlink href=#connecting-the-swarm-to-the-realtimeagent title="Permanent link">#</a></h3> <p>In this section, we will connect the Swarm to the <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a>, enabling real-time voice interaction and task delegation. To achieve this, we use FastAPI to create a lightweight server that acts as a bridge between Twilio and the <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a>.</p> <p>The key functionalities of this implementation include:</p> <ol> <li><strong>Setting Up a REST Endpoint</strong> We define a REST API endpoint, <code>/incoming-call</code>, to handle incoming voice calls from Twilio. This endpoint returns a Twilio Markup Language (TwiML) response, connecting the call to Twilio’s Media Stream for real-time audio data transfer.</li> </ol> <p><div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=n>app</span><span class=o>.</span><span class=n>api_route</span><span class=p>(</span><span class=s2>&quot;/incoming-call&quot;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;GET&quot;</span><span class=p>,</span> <span class=s2>&quot;POST&quot;</span><span class=p>])</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>handle_incoming_call</span><span class=p>(</span><span class=n>request</span><span class=p>:</span> <span class=n>Request</span><span class=p>):</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Handle incoming call and return TwiML response to connect to Media Stream.&quot;&quot;&quot;</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>    <span class=n>response</span> <span class=o>=</span> <span class=n>VoiceResponse</span><span class=p>()</span>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>    <span class=n>response</span><span class=o>.</span><span class=n>say</span><span class=p>(</span><span class=s2>&quot;Please wait while we connect your call to the AI voice assistant.&quot;</span><span class=p>)</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>    <span class=n>response</span><span class=o>.</span><span class=n>pause</span><span class=p>(</span><span class=n>length</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>    <span class=n>response</span><span class=o>.</span><span class=n>say</span><span class=p>(</span><span class=s2>&quot;O.K. you can start talking!&quot;</span><span class=p>)</span>
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>    <span class=n>host</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>url</span><span class=o>.</span><span class=n>hostname</span>
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>    <span class=n>connect</span> <span class=o>=</span> <span class=n>Connect</span><span class=p>()</span>
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>    <span class=n>connect</span><span class=o>.</span><span class=n>stream</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;wss://</span><span class=si>{</span><span class=n>host</span><span class=si>}</span><span class=s2>/media-stream&quot;</span><span class=p>)</span>
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a>    <span class=n>response</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>connect</span><span class=p>)</span>
<a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a>    <span class=k>return</span> <span class=n>HTMLResponse</span><span class=p>(</span><span class=n>content</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>response</span><span class=p>),</span> <span class=n>media_type</span><span class=o>=</span><span class=s2>&quot;application/xml&quot;</span><span class=p>)</span>
</code></pre></div> 2. <strong>WebSocket Media Stream</strong> A WebSocket endpoint, <code>/media-stream</code>, is established to manage real-time audio communication between Twilio and a realtime model inference client such as OpenAI's realtime API. This allows audio data to flow seamlessly, enabling the <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a> to process and respond to user queries. <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=nd>@app</span><span class=o>.</span><span class=n>websocket</span><span class=p>(</span><span class=s2>&quot;/media-stream&quot;</span><span class=p>)</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>handle_media_stream</span><span class=p>(</span><span class=n>websocket</span><span class=p>:</span> <span class=n>WebSocket</span><span class=p>):</span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Handle WebSocket connections between Twilio and realtime model inference client.&quot;&quot;&quot;</span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>    <span class=k>await</span> <span class=n>websocket</span><span class=o>.</span><span class=n>accept</span><span class=p>()</span>
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>    <span class=o>...</span>
</code></pre></div> 3. <strong>Initializing the RealtimeAgent</strong> Inside the WebSocket handler, we instantiate the <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a> with the following components: - <strong>Name</strong>: The identifier for the agent (e.g., <code>Customer_service_Bot</code>). - <strong>LLM Configuration</strong>: The configuration for the underlying realtime model inference client that powers the agent. - <strong>Audio Adapter</strong>: A TwilioAudioAdapter is used to handle audio streaming between Twilio and the agent. <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>   <span class=n>audio_adapter</span> <span class=o>=</span> <span class=n>TwilioAudioAdapter</span><span class=p>(</span><span class=n>websocket</span><span class=p>)</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>   <span class=n>realtime_agent</span> <span class=o>=</span> <span class=n>RealtimeAgent</span><span class=p>(</span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;Customer_service_Bot&quot;</span><span class=p>,</span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>        <span class=n>llm_config</span><span class=o>=</span><span class=n>realtime_llm_config</span><span class=p>,</span>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>        <span class=n>audio_adapter</span><span class=o>=</span><span class=n>audio_adapter</span><span class=p>,</span>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>   <span class=p>)</span>
</code></pre></div> 4. <strong>Registering the Swarm</strong> The <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a> can be patched using <code>register_swarm</code> to be integrated into a swarm of agents. - <code>realtime_agent</code>: <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a> which we want to include in the swarm. - <code>initial_agent</code>: The first agent to process incoming queries (e.g., a triage agent). - <code>agents</code>: A list of specialized agents for handling specific tasks like flight modifications, cancellations, or lost baggage. <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>   <span class=n>register_swarm</span><span class=p>(</span>
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>        <span class=n>realtime_agent</span><span class=o>=</span><span class=n>realtime_agent</span><span class=p>,</span>
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>        <span class=n>initial_agent</span><span class=o>=</span><span class=n>triage_agent</span><span class=p>,</span>
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>        <span class=n>agents</span><span class=o>=</span><span class=p>[</span><span class=n>triage_agent</span><span class=p>,</span> <span class=n>flight_modification</span><span class=p>,</span> <span class=n>flight_cancel</span><span class=p>,</span> <span class=n>flight_change</span><span class=p>,</span> <span class=n>lost_baggage</span><span class=p>],</span>
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>    <span class=p>)</span>
</code></pre></div> 5. <strong>Running the RealtimeAgent</strong> The <code>run()</code> method is invoked to start the <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a>, enabling it to handle real-time voice interactions and delegate tasks to the registered Swarm agents. <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>   <span class=k>await</span> <span class=n>realtime_agent</span><span class=o>.</span><span class=n>run</span><span class=p>()</span>
</code></pre></div> Here is the full code for this integration:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=n>app</span> <span class=o>=</span> <span class=n>FastAPI</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=s2>&quot;Realtime Swarm Agent Chat&quot;</span><span class=p>,</span> <span class=n>version</span><span class=o>=</span><span class=s2>&quot;0.1.0&quot;</span><span class=p>)</span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=nd>@app</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>,</span> <span class=n>response_class</span><span class=o>=</span><span class=n>JSONResponse</span><span class=p>)</span>
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>index_page</span><span class=p>():</span>
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>    <span class=k>return</span> <span class=p>{</span><span class=s2>&quot;message&quot;</span><span class=p>:</span> <span class=s2>&quot;Twilio Media Stream Server is running!&quot;</span><span class=p>}</span>
<a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>
<a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=nd>@app</span><span class=o>.</span><span class=n>api_route</span><span class=p>(</span><span class=s2>&quot;/incoming-call&quot;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;GET&quot;</span><span class=p>,</span> <span class=s2>&quot;POST&quot;</span><span class=p>])</span>
<a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>handle_incoming_call</span><span class=p>(</span><span class=n>request</span><span class=p>:</span> <span class=n>Request</span><span class=p>):</span>
<a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Handle incoming call and return TwiML response to connect to Media Stream.&quot;&quot;&quot;</span>
<a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a>    <span class=n>response</span> <span class=o>=</span> <span class=n>VoiceResponse</span><span class=p>()</span>
<a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>    <span class=n>response</span><span class=o>.</span><span class=n>say</span><span class=p>(</span><span class=s2>&quot;Please wait while we connect your call to the AI voice assistant.&quot;</span><span class=p>)</span>
<a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a>    <span class=n>response</span><span class=o>.</span><span class=n>pause</span><span class=p>(</span><span class=n>length</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>    <span class=n>response</span><span class=o>.</span><span class=n>say</span><span class=p>(</span><span class=s2>&quot;O.K. you can start talking!&quot;</span><span class=p>)</span>
<a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a>    <span class=n>host</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>url</span><span class=o>.</span><span class=n>hostname</span>
<a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a>    <span class=n>connect</span> <span class=o>=</span> <span class=n>Connect</span><span class=p>()</span>
<a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a>    <span class=n>connect</span><span class=o>.</span><span class=n>stream</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;wss://</span><span class=si>{</span><span class=n>host</span><span class=si>}</span><span class=s2>/media-stream&quot;</span><span class=p>)</span>
<a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a>    <span class=n>response</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>connect</span><span class=p>)</span>
<a id=__codelineno-13-18 name=__codelineno-13-18 href=#__codelineno-13-18></a>    <span class=k>return</span> <span class=n>HTMLResponse</span><span class=p>(</span><span class=n>content</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>response</span><span class=p>),</span> <span class=n>media_type</span><span class=o>=</span><span class=s2>&quot;application/xml&quot;</span><span class=p>)</span>
<a id=__codelineno-13-19 name=__codelineno-13-19 href=#__codelineno-13-19></a>
<a id=__codelineno-13-20 name=__codelineno-13-20 href=#__codelineno-13-20></a><span class=nd>@app</span><span class=o>.</span><span class=n>websocket</span><span class=p>(</span><span class=s2>&quot;/media-stream&quot;</span><span class=p>)</span>
<a id=__codelineno-13-21 name=__codelineno-13-21 href=#__codelineno-13-21></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>handle_media_stream</span><span class=p>(</span><span class=n>websocket</span><span class=p>:</span> <span class=n>WebSocket</span><span class=p>):</span>
<a id=__codelineno-13-22 name=__codelineno-13-22 href=#__codelineno-13-22></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Handle WebSocket connections between Twilio and realtime model inference client.&quot;&quot;&quot;</span>
<a id=__codelineno-13-23 name=__codelineno-13-23 href=#__codelineno-13-23></a>    <span class=k>await</span> <span class=n>websocket</span><span class=o>.</span><span class=n>accept</span><span class=p>()</span>
<a id=__codelineno-13-24 name=__codelineno-13-24 href=#__codelineno-13-24></a>
<a id=__codelineno-13-25 name=__codelineno-13-25 href=#__codelineno-13-25></a>    <span class=n>audio_adapter</span> <span class=o>=</span> <span class=n>TwilioAudioAdapter</span><span class=p>(</span><span class=n>websocket</span><span class=p>)</span>
<a id=__codelineno-13-26 name=__codelineno-13-26 href=#__codelineno-13-26></a>
<a id=__codelineno-13-27 name=__codelineno-13-27 href=#__codelineno-13-27></a>    <span class=n>realtime_agent</span> <span class=o>=</span> <span class=n>RealtimeAgent</span><span class=p>(</span>
<a id=__codelineno-13-28 name=__codelineno-13-28 href=#__codelineno-13-28></a>        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;Customer_service_Bot&quot;</span><span class=p>,</span>
<a id=__codelineno-13-29 name=__codelineno-13-29 href=#__codelineno-13-29></a>        <span class=n>llm_config</span><span class=o>=</span><span class=n>realtime_llm_config</span><span class=p>,</span>
<a id=__codelineno-13-30 name=__codelineno-13-30 href=#__codelineno-13-30></a>        <span class=n>audio_adapter</span><span class=o>=</span><span class=n>audio_adapter</span><span class=p>,</span>
<a id=__codelineno-13-31 name=__codelineno-13-31 href=#__codelineno-13-31></a>    <span class=p>)</span>
<a id=__codelineno-13-32 name=__codelineno-13-32 href=#__codelineno-13-32></a>
<a id=__codelineno-13-33 name=__codelineno-13-33 href=#__codelineno-13-33></a>    <span class=n>register_swarm</span><span class=p>(</span>
<a id=__codelineno-13-34 name=__codelineno-13-34 href=#__codelineno-13-34></a>        <span class=n>realtime_agent</span><span class=o>=</span><span class=n>realtime_agent</span><span class=p>,</span>
<a id=__codelineno-13-35 name=__codelineno-13-35 href=#__codelineno-13-35></a>        <span class=n>initial_agent</span><span class=o>=</span><span class=n>triage_agent</span><span class=p>,</span>
<a id=__codelineno-13-36 name=__codelineno-13-36 href=#__codelineno-13-36></a>        <span class=n>agents</span><span class=o>=</span><span class=p>[</span><span class=n>triage_agent</span><span class=p>,</span> <span class=n>flight_modification</span><span class=p>,</span> <span class=n>flight_cancel</span><span class=p>,</span> <span class=n>flight_change</span><span class=p>,</span> <span class=n>lost_baggage</span><span class=p>],</span>
<a id=__codelineno-13-37 name=__codelineno-13-37 href=#__codelineno-13-37></a>    <span class=p>)</span>
<a id=__codelineno-13-38 name=__codelineno-13-38 href=#__codelineno-13-38></a>
<a id=__codelineno-13-39 name=__codelineno-13-39 href=#__codelineno-13-39></a>    <span class=k>await</span> <span class=n>realtime_agent</span><span class=o>.</span><span class=n>run</span><span class=p>()</span>
</code></pre></div> <h3 id=results-running-the-service><strong>Results: Running the Service</strong><a class=headerlink href=#results-running-the-service title="Permanent link">#</a></h3> <p>With everything set up, it’s time to put your <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a> to the test! Follow these steps to make your first call and interact with the AI system:</p> <ol> <li><strong>Ensure Everything is Running</strong></li> <li>Verify that your <strong>ngrok</strong> session is still active and providing a public URL.</li> <li> <p>Confirm that your FastAPI server is up and running, as outlined in the previous chapters.</p> </li> <li> <p><strong>Place a Call</strong></p> </li> <li>Use a cell phone or landline to call your <strong>Twilio number</strong>.</li> <li> <p>Alternatively, you can use <a href=https://www.twilio.com/docs/labs/dev-phone>twilllo dev phone</a> to call your <strong>Twilio number</strong></p> </li> <li> <p><strong>Watch the Magic Happen</strong></p> </li> <li>Start speaking! You’ll hear the AI system’s initial message and then be able to interact with it in real-time.</li> </ol> <h4 id=realtime-agent-and-swarm-workflow-in-action><strong>Realtime Agent and Swarm Workflow in Action</strong><a class=headerlink href=#realtime-agent-and-swarm-workflow-in-action title="Permanent link">#</a></h4> <p>The following images showcase the seamless interaction between the <a href=../../../../api-reference/autogen/agentchat/realtime/experimental/RealtimeAgent><strong><code>RealtimeAgent</code></strong></a> and the Swarm of agents as they work together to handle a live customer request. Here's how the process unfolds:</p> <ol> <li> <p><strong>Service Initialization</strong> Our service starts successfully, ready to handle incoming calls and process real-time interactions. <img alt="Realtime Agent Swarm" src=../../../../../snippets/advanced-concepts/realtime-agent/img/1_service_running.png></p> </li> <li> <p><strong>Incoming Call</strong> A call comes in, and the <strong>RealtimeAgent</strong> greets us with an audio prompt: <em>“What do you need assistance with today?”</em> <img alt="Realtime Agent Swarm" src=../../../../../snippets/advanced-concepts/realtime-agent/img/2_incoming_call.png></p> </li> <li> <p><strong>Request Relay to Swarm</strong> We respond via audio, requesting to cancel our flight. The <strong>RealtimeAgent</strong> processes this request and relays it to the Swarm team for further action. <img alt="Realtime Agent Swarm" src=../../../../../snippets/advanced-concepts/realtime-agent/img/3_request_for_flight_cancellation.png></p> </li> <li> <p><strong>Clarification from Swarm</strong> The Swarm requires additional information, asking for the flight number we want to cancel. The <strong>RealtimeAgent</strong> gathers this detail from us and passes it back to the Swarm. <img alt="Realtime Agent Swarm" src=../../../../../snippets/advanced-concepts/realtime-agent/img/4_flight_number_name.png></p> </li> <li> <p><strong>Policy Confirmation</strong> The Swarm then queries us about the refund policy preference (e.g., refund vs. flight credits). The <strong>RealtimeAgent</strong> conveys this question, and after receiving our preference (flight credits), it informs the Swarm. <img alt="Realtime Agent Swarm" src=../../../../../snippets/advanced-concepts/realtime-agent/img/5_refund_policy.png></p> </li> <li> <p><strong>Successful Resolution</strong> The Swarm successfully processes the cancellation and initiates the refund. The <strong>RealtimeAgent</strong> communicates this resolution to us over audio: <em>“Your refund has been successfully initiated.”</em> <img alt="Realtime Agent Swarm" src=../../../../../snippets/advanced-concepts/realtime-agent/img/6_flight_refunded.png></p> </li> </ol> <p>This flow highlights the power of integrating real-time audio interaction with the collaborative capabilities of a Swarm of AI agents, providing efficient and user-friendly solutions to complex tasks.</p> <p><realtimeagent/></p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2025-05-08T13:42:17+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2025-05-08</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../webrtc/ class="md-footer__link md-footer__link--prev" aria-label="Previous: WebRTC Integration"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> WebRTC Integration </div> </div> </a> <a href=../../rag/ class="md-footer__link md-footer__link--next" aria-label="Next: RAG"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> RAG </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy; 2025 <a href=https://ag2.ai/ target=_blank rel=noopener>ag2</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://discord.gg/pAbnFJrkgZ target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg> </a> <a href=https://github.com/ag2ai/ag2 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg> </a> <a href=https://x.com/ag2oss target=_blank rel=noopener title=x.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg> </a> <a href=https://www.youtube.com/@ag2ai target=_blank rel=noopener title=www.youtube.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg> </a> <a href=https://www.linkedin.com/company/ag2ai target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["search.suggest", "search.highlight", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.tracking", "navigation.prune", "navigation.top", "navigation.footer", "content.tabs.link", "content.code.copy", "content.code.annotate", "content.action.edit"], "search": "../../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../../../../js/timeago.min.js></script> <script src=../../../../../js/timeago_mkdocs_material.js></script> <script src=../../../../../javascripts/extra.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>