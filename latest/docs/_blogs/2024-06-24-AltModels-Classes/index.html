<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A programming framework for agentic AI"><meta name=author content="Chi Wang & Qingyun Wu"><link href=https://docs.ag2.ai/latest/docs/_blogs/2024-06-24-AltModels-Classes/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>Enhanced Support for Non-OpenAI Models - AG2</title><link rel=stylesheet href=../../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../css/timeago.css><link rel=stylesheet href=../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../stylesheets/extra.ff0633.min.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-2GN2KN2CE4"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-2GN2KN2CE4",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-2GN2KN2CE4",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta http-equiv=Cache-Control content="no-cache, no-store, must-revalidate"><meta property=og:type content=website><meta property=og:title content="AG2 - Enhanced Support for Non-OpenAI Models"><meta property=og:description content="A programming framework for agentic AI"><meta content=https://docs.ag2.ai/latest/docs/_blogs/2024-06-24-AltModels-Classes/ property=og:url><meta property=og:image content=https://opengraph.githubassets.com/1671805243.560327/ag2ai/ag2><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="AG2 - Enhanced Support for Non-OpenAI Models"><meta name=twitter:description content="A programming framework for agentic AI"><meta name=twitter:image content=https://opengraph.githubassets.com/1671805243.560327/ag2ai/ag2><link rel=icon href=https://docs.ag2.ai/latest/assets/img/favicon.svg type=image/x-icon><link rel=icon href=https://docs.ag2.ai/latest/assets/img/favicon-dark.svg type=image/x-icon media="(prefers-color-scheme: light)"><link rel=icon href=https://docs.ag2.ai/latest/assets/img/favicon.svg type=image/x-icon media="(prefers-color-scheme: dark)"><link href=../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src=../../../assets/javascripts/glightbox.min.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#tldr class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=AG2 class="md-header__button md-logo" aria-label=AG2 data-md-component=logo> <img src=../../../assets/img/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AG2 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Enhanced Support for Non-OpenAI Models </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ag2ai/ag2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ag2ai/ag2 </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../quick-start/ class=md-tabs__link> Quick Start </a> </li> <li class=md-tabs__item> <a href=../../user-guide/basic-concepts/installing-ag2/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../api-reference/autogen/Agent/ class=md-tabs__link> API References </a> </li> <li class=md-tabs__item> <a href=../../contributor-guide/contributing/ class=md-tabs__link> Contributor Guide </a> </li> <li class=md-tabs__item> <a href=../../ecosystem/agentops/ class=md-tabs__link> Ecosystem </a> </li> <li class=md-tabs__item> <a href=../../use-cases/use-cases/customer-service/ class=md-tabs__link> Use Cases </a> </li> <li class=md-tabs__item> <a href=../../user-stories/2025-04-30-Cegid-Pulse-OS/cegid_pulse_os/ class=md-tabs__link> Community Insights </a> </li> <li class=md-tabs__item> <a href=../../blog/ class=md-tabs__link> Blog </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=AG2 class="md-nav__button md-logo" aria-label=AG2 data-md-component=logo> <img src=../../../assets/img/logo.svg alt=logo> </a> AG2 </label> <div class=md-nav__source> <a href=https://github.com/ag2ai/ag2 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> ag2ai/ag2 </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../quick-start/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../user-guide/basic-concepts/installing-ag2/ class=md-nav__link> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../api-reference/autogen/Agent/ class=md-nav__link> <span class=md-ellipsis> API References </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../contributor-guide/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributor Guide </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../ecosystem/agentops/ class=md-nav__link> <span class=md-ellipsis> Ecosystem </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../use-cases/use-cases/customer-service/ class=md-nav__link> <span class=md-ellipsis> Use Cases </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../user-stories/2025-04-30-Cegid-Pulse-OS/cegid_pulse_os/ class=md-nav__link> <span class=md-ellipsis> Community Insights </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../blog/ class=md-nav__link> <span class=md-ellipsis> Blog </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#tldr class=md-nav__link> <span class=md-ellipsis> TL;DR </span> </a> </li> <li class=md-nav__item> <a href=#benefits-of-choice class=md-nav__link> <span class=md-ellipsis> Benefits of choice </span> </a> </li> <li class=md-nav__item> <a href=#mix-and-match class=md-nav__link> <span class=md-ellipsis> Mix and match </span> </a> </li> <li class=md-nav__item> <a href=#capabilities class=md-nav__link> <span class=md-ellipsis> Capabilities </span> </a> </li> <li class=md-nav__item> <a href=#tips class=md-nav__link> <span class=md-ellipsis> Tips </span> </a> </li> <li class=md-nav__item> <a href=#quickstart class=md-nav__link> <span class=md-ellipsis> Quickstart </span> </a> <nav class=md-nav aria-label=Quickstart> <ul class=md-nav__list> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=#configuration-setup class=md-nav__link> <span class=md-ellipsis> Configuration Setup </span> </a> </li> <li class=md-nav__item> <a href=#usage class=md-nav__link> <span class=md-ellipsis> Usage </span> </a> </li> <li class=md-nav__item> <a href=#construct-agents class=md-nav__link> <span class=md-ellipsis> Construct Agents </span> </a> </li> <li class=md-nav__item> <a href=#start-chat class=md-nav__link> <span class=md-ellipsis> Start chat </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#function-calls class=md-nav__link> <span class=md-ellipsis> Function Calls </span> </a> </li> <li class=md-nav__item> <a href=#more-tips-and-tricks class=md-nav__link> <span class=md-ellipsis> More tips and tricks </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ag2ai/ag2/edit/main/website/docs/_blogs/2024-06-24-AltModels-Classes/index.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m7 14.94 6.06-6.06 2.06 2.06L9.06 17H7zM12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m4.7-10.65-1 1-2.05-2.05 1-1c.21-.22.56-.22.77 0l1.28 1.28c.22.21.22.56 0 .77M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2"/></svg> </a> <h1>Enhanced Support for Non-OpenAI Models</h1> <p><img alt=agents src=img/agentstogether.jpeg></p> <h2 id=tldr>TL;DR<a class=headerlink href=#tldr title="Permanent link">#</a></h2> <ul> <li><strong>AutoGen has expanded integrations with a variety of cloud-based model providers beyond OpenAI.</strong></li> <li><strong>Leverage models and platforms from Gemini, Anthropic, Mistral AI, Together.AI, and Groq for your AutoGen agents.</strong></li> <li><strong>Utilise models specifically for chat, language, image, and coding.</strong></li> <li><strong>LLM provider diversification can provide cost and resilience benefits.</strong></li> </ul> <p>In addition to the recently released AutoGen <a href=https://ai.google.dev/ >Google Gemini</a> client, new client classes for <a href=https://mistral.ai/ >Mistral AI</a>, <a href=https://www.anthropic.com/ >Anthropic</a>, <a href=https://www.together.ai/ >Together.AI</a>, and <a href=https://groq.com/ >Groq</a> enable you to utilize over 75 different large language models in your AutoGen agent workflow.</p> <p>These new client classes tailor AutoGen's underlying messages to each provider's unique requirements and remove that complexity from the developer, who can then focus on building their AutoGen workflow.</p> <p>Using them is as simple as installing the client-specific library and updating your LLM config with the relevant <code>api_type</code> and <code>model</code>. We'll demonstrate how to use them below.</p> <p>The community is continuing to enhance and build new client classes as cloud-based inference providers arrive. So, watch this space, and feel free to <a href=https://discord.gg/pAbnFJrkgZ>discuss</a> or <a href=https://github.com/ag2ai/ag2/pulls>develop</a> another one.</p> <h2 id=benefits-of-choice>Benefits of choice<a class=headerlink href=#benefits-of-choice title="Permanent link">#</a></h2> <p>The need to use only the best models to overcome workflow-breaking LLM inconsistency has diminished considerably over the last 12 months.</p> <p>These new classes provide access to the very largest trillion-parameter models from OpenAI, Google, and Anthropic, continuing to provide the most consistent and competent agent experiences. However, it's worth trying smaller models from the likes of Meta, Mistral AI, Microsoft, Qwen, and many others. Perhaps they are capable enough for a task, or sub-task, or even better suited (such as a coding model)!</p> <p>Using smaller models will have cost benefits, but they also allow you to test models that you could run locally, allowing you to determine if you can remove cloud inference costs altogether or even run an AutoGen workflow offline.</p> <p>On the topic of cost, these client classes also include provider-specific token cost calculations so you can monitor the cost impact of your workflows. With costs per million tokens as low as 10 cents (and some are even free!), cost savings can be noticeable.</p> <h2 id=mix-and-match>Mix and match<a class=headerlink href=#mix-and-match title="Permanent link">#</a></h2> <p>How does Google's Gemini 1.5 Pro model stack up against Anthropic's Opus or Meta's Llama 3?</p> <p>Now you have the ability to quickly change your agent configs and find out. If you want to run all three in the one workflow, AutoGen's ability to associate specific configurations to each agent means you can select the best LLM for each agent.</p> <h2 id=capabilities>Capabilities<a class=headerlink href=#capabilities title="Permanent link">#</a></h2> <p>The common requirements of text generation and function/tool calling are supported by these client classes.</p> <p>Multi-modal support, such as for image/audio/video, is an area of active development. The <a href=../../../../../user-guide/models/google-gemini>Google Gemini</a> client class can be used to create a multimodal agent.</p> <h2 id=tips>Tips<a class=headerlink href=#tips title="Permanent link">#</a></h2> <p>Here are some tips when working with these client classes:</p> <ul> <li><strong>Most to least capable</strong> - start with larger models and get your workflow working, then iteratively try smaller models.</li> <li><strong>Right model</strong> - choose one that's suited to your task, whether it's coding, function calling, knowledge, or creative writing.</li> <li><strong>Agent names</strong> - these cloud providers do not use the <code>name</code> field on a message, so be sure to use your agent's name in their <code>system_message</code> and <code>description</code> fields, as well as instructing the LLM to 'act as' them. This is particularly important for "auto" speaker selection in group chats as we need to guide the LLM to choose the next agent based on a name, so tweak <code>select_speaker_message_template</code>, <code>select_speaker_prompt_template</code>, and <code>select_speaker_auto_multiple_template</code> with more guidance.</li> <li><strong>Context length</strong> - as your conversation gets longer, models need to support larger context lengths, be mindful of what the model supports and consider using <a href=../../../../../use-cases/notebooks/notebooks/agentchat_transform_messages>Transform Messages</a> to manage context size.</li> <li><strong>Provider parameters</strong> - providers have parameters you can set such as temperature, maximum tokens, top-k, top-p, and safety. See each client class in AutoGen's API Reference or <a href=../../../../../user-guide/models/google-gemini>documentation</a> for details.</li> <li><strong>Prompts</strong> - prompt engineering is critical in guiding smaller LLMs to do what you need. <a href=https://docs.ag2.ai/docs/reference/agentchat/conversable_agent>ConversableAgent</a>, <a href=https://docs.ag2.ai/docs/reference/agentchat/groupchat>GroupChat</a>, <a href=https://docs.ag2.ai/latest/docs/api-reference/autogen/UserProxyAgent>UserProxyAgent</a>, and <a href=https://docs.ag2.ai/latest/docs/api-reference/autogen/AssistantAgent>AssistantAgent</a> all have customizable prompt attributes that you can tailor. Here are some prompting tips from <a href=https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/overview>Anthropic</a>(<a href=https://docs.anthropic.com/en/prompt-library/library>+Library</a>), <a href=https://docs.mistral.ai/guides/prompting_capabilities/ >Mistral AI</a>, <a href=https://docs.together.ai/docs/examples>Together.AI</a>, and <a href=https://www.llama.com/docs/how-to-guides/prompting/ >Meta</a>.</li> <li><strong>Help!</strong> - reach out on the AutoGen <a href=https://discord.gg/pAbnFJrkgZ>Discord</a> or <a href=https://github.com/ag2ai/ag2/issues>log an issue</a> if you need help with or can help improve these client classes.</li> </ul> <p>Now it's time to try them out.</p> <h2 id=quickstart>Quickstart<a class=headerlink href=#quickstart title="Permanent link">#</a></h2> <h3 id=installation>Installation<a class=headerlink href=#installation title="Permanent link">#</a></h3> <p>Install the appropriate client based on the model you wish to use.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>pip<span class=w> </span>install<span class=w> </span>autogen<span class=o>[</span><span class=s2>&quot;openai&quot;</span>,<span class=s2>&quot;mistral&quot;</span><span class=o>]</span><span class=w> </span><span class=c1># for Mistral AI client</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>pip<span class=w> </span>install<span class=w> </span>autogen<span class=o>[</span><span class=s2>&quot;openai&quot;</span>,<span class=s2>&quot;anthropic&quot;</span><span class=o>]</span><span class=w> </span><span class=c1># for Anthropic client</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>pip<span class=w> </span>install<span class=w> </span>autogen<span class=o>[</span><span class=s2>&quot;openai&quot;</span>,<span class=s2>&quot;together&quot;</span><span class=o>]</span><span class=w> </span><span class=c1># for Together.AI client</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>pip<span class=w> </span>install<span class=w> </span>autogen<span class=o>[</span><span class=s2>&quot;openai&quot;</span>,<span class=s2>&quot;groq&quot;</span><span class=o>]</span><span class=w> </span><span class=c1># for Groq client</span>
</code></pre></div> <h3 id=configuration-setup>Configuration Setup<a class=headerlink href=#configuration-setup title="Permanent link">#</a></h3> <p>Add your model configurations to the <code>OAI_CONFIG_LIST</code>. Ensure you specify the <code>api_type</code> to initialize the respective client (Anthropic, Mistral, or Together).</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class="p p-Indicator">[</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>    </span><span class="p p-Indicator">{</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>        </span><span class=s>&quot;model&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;your</span><span class=nv> </span><span class=s>anthropic</span><span class=nv> </span><span class=s>model</span><span class=nv> </span><span class=s>name&quot;</span><span class="p p-Indicator">,</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>        </span><span class=s>&quot;api_key&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;your</span><span class=nv> </span><span class=s>Anthropic</span><span class=nv> </span><span class=s>api_key&quot;</span><span class="p p-Indicator">,</span>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>        </span><span class=s>&quot;api_type&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;anthropic&quot;</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>    </span><span class="p p-Indicator">},</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>    </span><span class="p p-Indicator">{</span>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>        </span><span class=s>&quot;model&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;your</span><span class=nv> </span><span class=s>mistral</span><span class=nv> </span><span class=s>model</span><span class=nv> </span><span class=s>name&quot;</span><span class="p p-Indicator">,</span>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>        </span><span class=s>&quot;api_key&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;your</span><span class=nv> </span><span class=s>Mistral</span><span class=nv> </span><span class=s>AI</span><span class=nv> </span><span class=s>api_key&quot;</span><span class="p p-Indicator">,</span>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=w>        </span><span class=s>&quot;api_type&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;mistral&quot;</span>
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=w>    </span><span class="p p-Indicator">},</span>
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=w>    </span><span class="p p-Indicator">{</span>
<a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=w>        </span><span class=s>&quot;model&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;your</span><span class=nv> </span><span class=s>together.ai</span><span class=nv> </span><span class=s>model</span><span class=nv> </span><span class=s>name&quot;</span><span class="p p-Indicator">,</span>
<a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a><span class=w>        </span><span class=s>&quot;api_key&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;your</span><span class=nv> </span><span class=s>Together.AI</span><span class=nv> </span><span class=s>api_key&quot;</span><span class="p p-Indicator">,</span>
<a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=w>        </span><span class=s>&quot;api_type&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;together&quot;</span>
<a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a><span class=w>    </span><span class="p p-Indicator">},</span>
<a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a><span class=w>    </span><span class="p p-Indicator">{</span>
<a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a><span class=w>        </span><span class=s>&quot;model&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;your</span><span class=nv> </span><span class=s>groq</span><span class=nv> </span><span class=s>model</span><span class=nv> </span><span class=s>name&quot;</span><span class="p p-Indicator">,</span>
<a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a><span class=w>        </span><span class=s>&quot;api_key&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;your</span><span class=nv> </span><span class=s>Groq</span><span class=nv> </span><span class=s>api_key&quot;</span><span class="p p-Indicator">,</span>
<a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a><span class=w>        </span><span class=s>&quot;api_type&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;groq&quot;</span>
<a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a><span class=w>    </span><span class="p p-Indicator">}</span>
<a id=__codelineno-1-22 name=__codelineno-1-22 href=#__codelineno-1-22></a><span class="p p-Indicator">]</span>
</code></pre></div> <h3 id=usage>Usage<a class=headerlink href=#usage title="Permanent link">#</a></h3> <p>The <code>[LLMConfig.from_json](https://docs.ag2.ai/latest/docs/api-reference/autogen/llm_config/LLMConfig)</code> method loads a list of configurations from an environment variable or a json file.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=kn>import</span><span class=w> </span><span class=nn>autogen</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=kn>from</span><span class=w> </span><span class=nn>autogen</span><span class=w> </span><span class=kn>import</span> <span class=n>AssistantAgent</span><span class=p>,</span> <span class=n>UserProxyAgent</span><span class=p>,</span> <span class=n>LLMConfig</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=n>llm_config</span> <span class=o>=</span> <span class=n>LLMConfig</span><span class=o>.</span><span class=n>from_json</span><span class=p>(</span><span class=n>path</span><span class=o>=</span><span class=s2>&quot;OAI_CONFIG_LIST&quot;</span><span class=p>)</span>
</code></pre></div> <h3 id=construct-agents>Construct Agents<a class=headerlink href=#construct-agents title="Permanent link">#</a></h3> <p>Construct a simple conversation between a User proxy and an Assistant agent</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=n>user_proxy</span> <span class=o>=</span>  <span class=n>UserProxyAgent</span><span class=p>(</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;User_proxy&quot;</span><span class=p>,</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>    <span class=n>code_execution_config</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>        <span class=s2>&quot;last_n_messages&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>        <span class=s2>&quot;work_dir&quot;</span><span class=p>:</span> <span class=s2>&quot;groupchat&quot;</span><span class=p>,</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>        <span class=s2>&quot;use_docker&quot;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=c1># Please set use_docker = True if docker is available to run the generated code. Using docker is safer than running the generated code directly.</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>    <span class=p>},</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>    <span class=n>human_input_mode</span><span class=o>=</span><span class=s2>&quot;ALWAYS&quot;</span><span class=p>,</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>    <span class=n>is_termination_msg</span><span class=o>=</span><span class=k>lambda</span> <span class=n>msg</span><span class=p>:</span> <span class=ow>not</span> <span class=n>msg</span><span class=p>[</span><span class=s2>&quot;content&quot;</span><span class=p>]</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=p>)</span>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=k>with</span> <span class=n>llm_config</span><span class=p>:</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a>    <span class=n>assistant</span> <span class=o>=</span> <span class=n>AssistantAgent</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&quot;assistant&quot;</span><span class=p>)</span>
</code></pre></div> <h3 id=start-chat>Start chat<a class=headerlink href=#start-chat title="Permanent link">#</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=n>user_proxy</span><span class=o>.</span><span class=n>intiate_chat</span><span class=p>(</span><span class=n>assistant</span><span class=p>,</span> <span class=n>message</span><span class=o>=</span><span class=s2>&quot;Write python code to print Hello World!&quot;</span><span class=p>)</span>
</code></pre></div> <p><strong>NOTE: To integrate this setup into GroupChat, follow the <a href=https://docs.ag2.ai/latest/docs/use-cases/notebooks/notebooks/agentchat_groupchat>tutorial</a> with the same config as above.</strong></p> <h2 id=function-calls>Function Calls<a class=headerlink href=#function-calls title="Permanent link">#</a></h2> <p>Now, let's look at how Anthropic's Sonnet 3.5 is able to suggest multiple function calls in a single response.</p> <p>This example is a simple travel agent setup with an agent for function calling and a user proxy agent for executing the functions.</p> <p>One thing you'll note here is Anthropic's models are more verbose than OpenAI's and will typically provide chain-of-thought or general verbiage when replying. Therefore we provide more explicit instructions to <code>functionbot</code> to not reply with more than necessary. Even so, it can't always help itself!</p> <p>Let's start with setting up our configuration and agents.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=kn>import</span><span class=w> </span><span class=nn>os</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=kn>import</span><span class=w> </span><span class=nn>autogen</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=kn>import</span><span class=w> </span><span class=nn>json</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Literal</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=kn>from</span><span class=w> </span><span class=nn>typing_extensions</span><span class=w> </span><span class=kn>import</span> <span class=n>Annotated</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=c1># Anthropic configuration, using api_type=&#39;anthropic&#39;</span>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=n>anthropic_llm_config</span> <span class=o>=</span> <span class=n>LLMConfig</span><span class=p>(</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>    <span class=n>api_type</span> <span class=o>=</span> <span class=s2>&quot;anthropic&quot;</span><span class=p>,</span>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>    <span class=n>model</span> <span class=o>=</span> <span class=s2>&quot;claude-3-5-sonnet-20240620&quot;</span><span class=p>,</span>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>    <span class=n>api_key</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;ANTHROPIC_API_KEY&quot;</span><span class=p>),</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>    <span class=n>cache_seed</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=p>)</span>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=c1># Our functionbot, who will be assigned two functions and</span>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=c1># given directions to use them.</span>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=k>with</span> <span class=n>anthropic_llm_config</span><span class=p>:</span>
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a>    <span class=n>functionbot</span> <span class=o>=</span> <span class=n>autogen</span><span class=o>.</span><span class=n>AssistantAgent</span><span class=p>(</span>
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a>        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;functionbot&quot;</span><span class=p>,</span>
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a>        <span class=n>system_message</span><span class=o>=</span><span class=s2>&quot;For currency exchange tasks, only use &quot;</span>
<a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a>        <span class=s2>&quot;the functions you have been provided with. Do not &quot;</span>
<a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a>        <span class=s2>&quot;reply with helpful tips. Once you&#39;ve recommended functions &quot;</span>
<a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a>        <span class=s2>&quot;reply with &#39;TERMINATE&#39;.&quot;</span><span class=p>,</span>
<a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a>        <span class=n>is_termination_msg</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=p>(</span><span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>rstrip</span><span class=p>()</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s2>&quot;TERMINATE&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;&quot;</span><span class=p>),</span>
<a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a>    <span class=p>)</span>
<a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a>
<a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a><span class=c1># Our user proxy agent, who will be used to manage the customer</span>
<a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a><span class=c1># request and conversation with the functionbot, terminating</span>
<a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a><span class=c1># when we have the information we need.</span>
<a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a><span class=n>user_proxy</span> <span class=o>=</span> <span class=n>autogen</span><span class=o>.</span><span class=n>UserProxyAgent</span><span class=p>(</span>
<a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a>    <span class=n>name</span><span class=o>=</span><span class=s2>&quot;user_proxy&quot;</span><span class=p>,</span>
<a id=__codelineno-5-32 name=__codelineno-5-32 href=#__codelineno-5-32></a>    <span class=n>system_message</span><span class=o>=</span><span class=s2>&quot;You are a travel agent that provides &quot;</span>
<a id=__codelineno-5-33 name=__codelineno-5-33 href=#__codelineno-5-33></a>        <span class=s2>&quot;specific information to your customers. Get the &quot;</span>
<a id=__codelineno-5-34 name=__codelineno-5-34 href=#__codelineno-5-34></a>        <span class=s2>&quot;information you need and provide a great summary &quot;</span>
<a id=__codelineno-5-35 name=__codelineno-5-35 href=#__codelineno-5-35></a>        <span class=s2>&quot;so your customer can have a great trip. If you &quot;</span>
<a id=__codelineno-5-36 name=__codelineno-5-36 href=#__codelineno-5-36></a>        <span class=s2>&quot;have the information you need, simply reply with &quot;</span>
<a id=__codelineno-5-37 name=__codelineno-5-37 href=#__codelineno-5-37></a>        <span class=s2>&quot;&#39;TERMINATE&#39;.&quot;</span><span class=p>,</span>
<a id=__codelineno-5-38 name=__codelineno-5-38 href=#__codelineno-5-38></a>    <span class=n>is_termination_msg</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=p>(</span><span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>rstrip</span><span class=p>()</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s2>&quot;TERMINATE&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=n>x</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;&quot;</span><span class=p>),</span>
<a id=__codelineno-5-39 name=__codelineno-5-39 href=#__codelineno-5-39></a>    <span class=n>human_input_mode</span><span class=o>=</span><span class=s2>&quot;NEVER&quot;</span><span class=p>,</span>
<a id=__codelineno-5-40 name=__codelineno-5-40 href=#__codelineno-5-40></a>    <span class=n>max_consecutive_auto_reply</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
<a id=__codelineno-5-41 name=__codelineno-5-41 href=#__codelineno-5-41></a><span class=p>)</span>
</code></pre></div> <p>We define the two functions. <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=n>CurrencySymbol</span> <span class=o>=</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;USD&quot;</span><span class=p>,</span> <span class=s2>&quot;EUR&quot;</span><span class=p>]</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=k>def</span><span class=w> </span><span class=nf>exchange_rate</span><span class=p>(</span><span class=n>base_currency</span><span class=p>:</span> <span class=n>CurrencySymbol</span><span class=p>,</span> <span class=n>quote_currency</span><span class=p>:</span> <span class=n>CurrencySymbol</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>    <span class=k>if</span> <span class=n>base_currency</span> <span class=o>==</span> <span class=n>quote_currency</span><span class=p>:</span>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>        <span class=k>return</span> <span class=mf>1.0</span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>    <span class=k>elif</span> <span class=n>base_currency</span> <span class=o>==</span> <span class=s2>&quot;USD&quot;</span> <span class=ow>and</span> <span class=n>quote_currency</span> <span class=o>==</span> <span class=s2>&quot;EUR&quot;</span><span class=p>:</span>
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>        <span class=k>return</span> <span class=mi>1</span> <span class=o>/</span> <span class=mf>1.1</span>
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>    <span class=k>elif</span> <span class=n>base_currency</span> <span class=o>==</span> <span class=s2>&quot;EUR&quot;</span> <span class=ow>and</span> <span class=n>quote_currency</span> <span class=o>==</span> <span class=s2>&quot;USD&quot;</span><span class=p>:</span>
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>        <span class=k>return</span> <span class=mf>1.1</span>
<a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Unknown currencies </span><span class=si>{</span><span class=n>base_currency</span><span class=si>}</span><span class=s2>, </span><span class=si>{</span><span class=n>quote_currency</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a>
<a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=k>def</span><span class=w> </span><span class=nf>get_current_weather</span><span class=p>(</span><span class=n>location</span><span class=p>,</span> <span class=n>unit</span><span class=o>=</span><span class=s2>&quot;fahrenheit&quot;</span><span class=p>):</span>
<a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get the weather for some location&quot;&quot;&quot;</span>
<a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a>    <span class=k>if</span> <span class=s2>&quot;chicago&quot;</span> <span class=ow>in</span> <span class=n>location</span><span class=o>.</span><span class=n>lower</span><span class=p>():</span>
<a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a>        <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>({</span><span class=s2>&quot;location&quot;</span><span class=p>:</span> <span class=s2>&quot;Chicago&quot;</span><span class=p>,</span> <span class=s2>&quot;temperature&quot;</span><span class=p>:</span> <span class=s2>&quot;13&quot;</span><span class=p>,</span> <span class=s2>&quot;unit&quot;</span><span class=p>:</span> <span class=n>unit</span><span class=p>})</span>
<a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a>    <span class=k>elif</span> <span class=s2>&quot;san francisco&quot;</span> <span class=ow>in</span> <span class=n>location</span><span class=o>.</span><span class=n>lower</span><span class=p>():</span>
<a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a>        <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>({</span><span class=s2>&quot;location&quot;</span><span class=p>:</span> <span class=s2>&quot;San Francisco&quot;</span><span class=p>,</span> <span class=s2>&quot;temperature&quot;</span><span class=p>:</span> <span class=s2>&quot;55&quot;</span><span class=p>,</span> <span class=s2>&quot;unit&quot;</span><span class=p>:</span> <span class=n>unit</span><span class=p>})</span>
<a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a>    <span class=k>elif</span> <span class=s2>&quot;new york&quot;</span> <span class=ow>in</span> <span class=n>location</span><span class=o>.</span><span class=n>lower</span><span class=p>():</span>
<a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a>        <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>({</span><span class=s2>&quot;location&quot;</span><span class=p>:</span> <span class=s2>&quot;New York&quot;</span><span class=p>,</span> <span class=s2>&quot;temperature&quot;</span><span class=p>:</span> <span class=s2>&quot;11&quot;</span><span class=p>,</span> <span class=s2>&quot;unit&quot;</span><span class=p>:</span> <span class=n>unit</span><span class=p>})</span>
<a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a>    <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a>        <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>({</span><span class=s2>&quot;location&quot;</span><span class=p>:</span> <span class=n>location</span><span class=p>,</span> <span class=s2>&quot;temperature&quot;</span><span class=p>:</span> <span class=s2>&quot;unknown&quot;</span><span class=p>})</span>
</code></pre></div></p> <p>And then associate them with the <code>user_proxy</code> for execution and <code>functionbot</code> for the LLM to consider using them.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nd>@user_proxy</span><span class=o>.</span><span class=n>register_for_execution</span><span class=p>()</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=nd>@functionbot</span><span class=o>.</span><span class=n>register_for_llm</span><span class=p>(</span><span class=n>description</span><span class=o>=</span><span class=s2>&quot;Currency exchange calculator.&quot;</span><span class=p>)</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=k>def</span><span class=w> </span><span class=nf>currency_calculator</span><span class=p>(</span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>    <span class=n>base_amount</span><span class=p>:</span> <span class=n>Annotated</span><span class=p>[</span><span class=nb>float</span><span class=p>,</span> <span class=s2>&quot;Amount of currency in base_currency&quot;</span><span class=p>],</span>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>    <span class=n>base_currency</span><span class=p>:</span> <span class=n>Annotated</span><span class=p>[</span><span class=n>CurrencySymbol</span><span class=p>,</span> <span class=s2>&quot;Base currency&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;USD&quot;</span><span class=p>,</span>
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>    <span class=n>quote_currency</span><span class=p>:</span> <span class=n>Annotated</span><span class=p>[</span><span class=n>CurrencySymbol</span><span class=p>,</span> <span class=s2>&quot;Quote currency&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;EUR&quot;</span><span class=p>,</span>
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>    <span class=n>quote_amount</span> <span class=o>=</span> <span class=n>exchange_rate</span><span class=p>(</span><span class=n>base_currency</span><span class=p>,</span> <span class=n>quote_currency</span><span class=p>)</span> <span class=o>*</span> <span class=n>base_amount</span>
<a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a>    <span class=k>return</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>quote_amount</span><span class=si>}</span><span class=s2> </span><span class=si>{</span><span class=n>quote_currency</span><span class=si>}</span><span class=s2>&quot;</span>
<a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a>
<a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=nd>@user_proxy</span><span class=o>.</span><span class=n>register_for_execution</span><span class=p>()</span>
<a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=nd>@functionbot</span><span class=o>.</span><span class=n>register_for_llm</span><span class=p>(</span><span class=n>description</span><span class=o>=</span><span class=s2>&quot;Weather forecast for US cities.&quot;</span><span class=p>)</span>
<a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=k>def</span><span class=w> </span><span class=nf>weather_forecast</span><span class=p>(</span>
<a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a>    <span class=n>location</span><span class=p>:</span> <span class=n>Annotated</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=s2>&quot;City name&quot;</span><span class=p>],</span>
<a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a>    <span class=n>weather_details</span> <span class=o>=</span> <span class=n>get_current_weather</span><span class=p>(</span><span class=n>location</span><span class=o>=</span><span class=n>location</span><span class=p>)</span>
<a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a>    <span class=n>weather</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>weather_details</span><span class=p>)</span>
<a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a>    <span class=k>return</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>weather</span><span class=p>[</span><span class=s1>&#39;location&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> will be </span><span class=si>{</span><span class=n>weather</span><span class=p>[</span><span class=s1>&#39;temperature&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> degrees </span><span class=si>{</span><span class=n>weather</span><span class=p>[</span><span class=s1>&#39;unit&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span>
</code></pre></div> <p>Finally, we start the conversation with a request for help from our customer on their upcoming trip to New York and the Euro they would like exchanged to USD.</p> <p>Importantly, we're also using Anthropic's Sonnet to provide a summary through the <code>summary_method</code>. Using <code>summary_prompt</code>, we guide Sonnet to give us an email output.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1># start the conversation</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=n>res</span> <span class=o>=</span> <span class=n>user_proxy</span><span class=o>.</span><span class=n>initiate_chat</span><span class=p>(</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>    <span class=n>functionbot</span><span class=p>,</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>    <span class=n>message</span><span class=o>=</span><span class=s2>&quot;My customer wants to travel to New York and &quot;</span>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>        <span class=s2>&quot;they need to exchange 830 EUR to USD. Can you please &quot;</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>        <span class=s2>&quot;provide them with a summary of the weather and &quot;</span>
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>        <span class=s2>&quot;exchanged currently in USD?&quot;</span><span class=p>,</span>
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>    <span class=n>summary_method</span><span class=o>=</span><span class=s2>&quot;reflection_with_llm&quot;</span><span class=p>,</span>
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>    <span class=n>summary_args</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>        <span class=s2>&quot;summary_prompt&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;&quot;Summarize the conversation by</span>
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=s2>        providing an email response with the travel information</span>
<a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=s2>        for the customer addressed as &#39;Dear Customer&#39;. Do not</span>
<a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=s2>        provide any additional conversation or apologise,</span>
<a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=s2>        just provide the relevant information and the email.&quot;&quot;&quot;</span>
<a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a>    <span class=p>},</span>
<a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a><span class=p>)</span>
</code></pre></div> <p>After the conversation has finished, we'll print out the summary.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Here&#39;s the LLM summary of the conversation:</span><span class=se>\n\n</span><span class=si>{</span><span class=n>res</span><span class=o>.</span><span class=n>summary</span><span class=p>[</span><span class=s1>&#39;content&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> <p>Here's the resulting output.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>user_proxy (to functionbot):
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>My customer wants to travel to New York and they need to exchange 830 EUR
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>to USD. Can you please provide them with a summary of the weather and
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>exchanged currently in USD?
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>--------------------------------------------------------------------------------
<a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>functionbot (to user_proxy):
<a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>
<a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a>Certainly! I&#39;d be happy to help your customer with information about the
<a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a>weather in New York and the currency exchange from EUR to USD. Let&#39;s use
<a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a>the available tools to get this information.
<a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a>
<a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a>***** Suggested tool call (toolu_016wBUKVX2TToBaMqmiGvhav): weather_forecast *****
<a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a>Arguments:
<a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a>{&quot;location&quot;: &quot;New York&quot;}
<a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a>**********************************************************************************
<a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a>***** Suggested tool call (toolu_01Nxjeew2BspfKdZ85on3XkP): currency_calculator *****
<a id=__codelineno-10-19 name=__codelineno-10-19 href=#__codelineno-10-19></a>Arguments:
<a id=__codelineno-10-20 name=__codelineno-10-20 href=#__codelineno-10-20></a>{&quot;base_amount&quot;: 830, &quot;base_currency&quot;: &quot;EUR&quot;, &quot;quote_currency&quot;: &quot;USD&quot;}
<a id=__codelineno-10-21 name=__codelineno-10-21 href=#__codelineno-10-21></a>*************************************************************************************
<a id=__codelineno-10-22 name=__codelineno-10-22 href=#__codelineno-10-22></a>
<a id=__codelineno-10-23 name=__codelineno-10-23 href=#__codelineno-10-23></a>--------------------------------------------------------------------------------
<a id=__codelineno-10-24 name=__codelineno-10-24 href=#__codelineno-10-24></a>
<a id=__codelineno-10-25 name=__codelineno-10-25 href=#__codelineno-10-25></a>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; EXECUTING FUNCTION weather_forecast...
<a id=__codelineno-10-26 name=__codelineno-10-26 href=#__codelineno-10-26></a>
<a id=__codelineno-10-27 name=__codelineno-10-27 href=#__codelineno-10-27></a>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; EXECUTING FUNCTION currency_calculator...
<a id=__codelineno-10-28 name=__codelineno-10-28 href=#__codelineno-10-28></a>user_proxy (to functionbot):
<a id=__codelineno-10-29 name=__codelineno-10-29 href=#__codelineno-10-29></a>
<a id=__codelineno-10-30 name=__codelineno-10-30 href=#__codelineno-10-30></a>user_proxy (to functionbot):
<a id=__codelineno-10-31 name=__codelineno-10-31 href=#__codelineno-10-31></a>
<a id=__codelineno-10-32 name=__codelineno-10-32 href=#__codelineno-10-32></a>***** Response from calling tool (toolu_016wBUKVX2TToBaMqmiGvhav) *****
<a id=__codelineno-10-33 name=__codelineno-10-33 href=#__codelineno-10-33></a>New York will be 11 degrees fahrenheit
<a id=__codelineno-10-34 name=__codelineno-10-34 href=#__codelineno-10-34></a>***********************************************************************
<a id=__codelineno-10-35 name=__codelineno-10-35 href=#__codelineno-10-35></a>
<a id=__codelineno-10-36 name=__codelineno-10-36 href=#__codelineno-10-36></a>--------------------------------------------------------------------------------
<a id=__codelineno-10-37 name=__codelineno-10-37 href=#__codelineno-10-37></a>user_proxy (to functionbot):
<a id=__codelineno-10-38 name=__codelineno-10-38 href=#__codelineno-10-38></a>
<a id=__codelineno-10-39 name=__codelineno-10-39 href=#__codelineno-10-39></a>***** Response from calling tool (toolu_01Nxjeew2BspfKdZ85on3XkP) *****
<a id=__codelineno-10-40 name=__codelineno-10-40 href=#__codelineno-10-40></a>913.0000000000001 USD
<a id=__codelineno-10-41 name=__codelineno-10-41 href=#__codelineno-10-41></a>***********************************************************************
<a id=__codelineno-10-42 name=__codelineno-10-42 href=#__codelineno-10-42></a>
<a id=__codelineno-10-43 name=__codelineno-10-43 href=#__codelineno-10-43></a>--------------------------------------------------------------------------------
<a id=__codelineno-10-44 name=__codelineno-10-44 href=#__codelineno-10-44></a>functionbot (to user_proxy):
<a id=__codelineno-10-45 name=__codelineno-10-45 href=#__codelineno-10-45></a>
<a id=__codelineno-10-46 name=__codelineno-10-46 href=#__codelineno-10-46></a>Thank you for providing the information. I can now give your customer a
<a id=__codelineno-10-47 name=__codelineno-10-47 href=#__codelineno-10-47></a>summary of the weather in New York and the currency exchange from EUR to USD.
<a id=__codelineno-10-48 name=__codelineno-10-48 href=#__codelineno-10-48></a>
<a id=__codelineno-10-49 name=__codelineno-10-49 href=#__codelineno-10-49></a>Weather in New York:
<a id=__codelineno-10-50 name=__codelineno-10-50 href=#__codelineno-10-50></a>The current forecast for New York indicates that it will be 11 degrees
<a id=__codelineno-10-51 name=__codelineno-10-51 href=#__codelineno-10-51></a>Fahrenheit. This is quite cold, so your customer should be prepared with
<a id=__codelineno-10-52 name=__codelineno-10-52 href=#__codelineno-10-52></a>warm clothing for their trip.
<a id=__codelineno-10-53 name=__codelineno-10-53 href=#__codelineno-10-53></a>
<a id=__codelineno-10-54 name=__codelineno-10-54 href=#__codelineno-10-54></a>Currency Exchange:
<a id=__codelineno-10-55 name=__codelineno-10-55 href=#__codelineno-10-55></a>For 830 EUR, your customer will receive approximately 913 USD. This is based
<a id=__codelineno-10-56 name=__codelineno-10-56 href=#__codelineno-10-56></a>on the current exchange rate provided by our currency calculator.
<a id=__codelineno-10-57 name=__codelineno-10-57 href=#__codelineno-10-57></a>
<a id=__codelineno-10-58 name=__codelineno-10-58 href=#__codelineno-10-58></a>To summarize:
<a id=__codelineno-10-59 name=__codelineno-10-59 href=#__codelineno-10-59></a>1. Weather in New York: 11F (very cold)
<a id=__codelineno-10-60 name=__codelineno-10-60 href=#__codelineno-10-60></a>2. Currency exchange: 830 EUR = 913 USD
<a id=__codelineno-10-61 name=__codelineno-10-61 href=#__codelineno-10-61></a>
<a id=__codelineno-10-62 name=__codelineno-10-62 href=#__codelineno-10-62></a>Your customer should pack warm clothes for the cold weather in New York and
<a id=__codelineno-10-63 name=__codelineno-10-63 href=#__codelineno-10-63></a>can expect to have about 913 USD for their trip after exchanging 830 EUR.
<a id=__codelineno-10-64 name=__codelineno-10-64 href=#__codelineno-10-64></a>
<a id=__codelineno-10-65 name=__codelineno-10-65 href=#__codelineno-10-65></a>TERMINATE
<a id=__codelineno-10-66 name=__codelineno-10-66 href=#__codelineno-10-66></a>
<a id=__codelineno-10-67 name=__codelineno-10-67 href=#__codelineno-10-67></a>--------------------------------------------------------------------------------
<a id=__codelineno-10-68 name=__codelineno-10-68 href=#__codelineno-10-68></a>Here&#39;s the LLM summary of the conversation:
<a id=__codelineno-10-69 name=__codelineno-10-69 href=#__codelineno-10-69></a>
<a id=__codelineno-10-70 name=__codelineno-10-70 href=#__codelineno-10-70></a>Certainly. I&#39;ll provide an email response to the customer with the travel
<a id=__codelineno-10-71 name=__codelineno-10-71 href=#__codelineno-10-71></a>information as requested.
<a id=__codelineno-10-72 name=__codelineno-10-72 href=#__codelineno-10-72></a>
<a id=__codelineno-10-73 name=__codelineno-10-73 href=#__codelineno-10-73></a>Dear Customer,
<a id=__codelineno-10-74 name=__codelineno-10-74 href=#__codelineno-10-74></a>
<a id=__codelineno-10-75 name=__codelineno-10-75 href=#__codelineno-10-75></a>We are pleased to provide you with the following information for your
<a id=__codelineno-10-76 name=__codelineno-10-76 href=#__codelineno-10-76></a>upcoming trip to New York:
<a id=__codelineno-10-77 name=__codelineno-10-77 href=#__codelineno-10-77></a>
<a id=__codelineno-10-78 name=__codelineno-10-78 href=#__codelineno-10-78></a>Weather Forecast:
<a id=__codelineno-10-79 name=__codelineno-10-79 href=#__codelineno-10-79></a>The current forecast for New York indicates a temperature of 11 degrees
<a id=__codelineno-10-80 name=__codelineno-10-80 href=#__codelineno-10-80></a>Fahrenheit. Please be prepared for very cold weather and pack appropriate
<a id=__codelineno-10-81 name=__codelineno-10-81 href=#__codelineno-10-81></a>warm clothing.
<a id=__codelineno-10-82 name=__codelineno-10-82 href=#__codelineno-10-82></a>
<a id=__codelineno-10-83 name=__codelineno-10-83 href=#__codelineno-10-83></a>Currency Exchange:
<a id=__codelineno-10-84 name=__codelineno-10-84 href=#__codelineno-10-84></a>We have calculated the currency exchange for you. Your 830 EUR will be
<a id=__codelineno-10-85 name=__codelineno-10-85 href=#__codelineno-10-85></a>equivalent to approximately 913 USD at the current exchange rate.
<a id=__codelineno-10-86 name=__codelineno-10-86 href=#__codelineno-10-86></a>
<a id=__codelineno-10-87 name=__codelineno-10-87 href=#__codelineno-10-87></a>We hope this information helps you prepare for your trip to New York. Have
<a id=__codelineno-10-88 name=__codelineno-10-88 href=#__codelineno-10-88></a>a safe and enjoyable journey!
<a id=__codelineno-10-89 name=__codelineno-10-89 href=#__codelineno-10-89></a>
<a id=__codelineno-10-90 name=__codelineno-10-90 href=#__codelineno-10-90></a>Best regards,
<a id=__codelineno-10-91 name=__codelineno-10-91 href=#__codelineno-10-91></a>Travel Assistance Team
</code></pre></div> <p>So we can see how Anthropic's Sonnet is able to suggest multiple tools in a single response, with AutoGen executing them both and providing the results back to Sonnet. Sonnet then finishes with a nice email summary that can be the basis for continued real-life conversation with the customer.</p> <h2 id=more-tips-and-tricks>More tips and tricks<a class=headerlink href=#more-tips-and-tricks title="Permanent link">#</a></h2> <p>For an interesting chess game between Anthropic's Sonnet and Mistral's Mixtral, we've put together a sample notebook that highlights some of the tips and tricks for working with non-OpenAI LLMs. <a href=https://docs.ag2.ai/latest/docs/use-cases/notebooks/notebooks/agentchat_nested_chats_chess_altmodels>See the notebook here</a>.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2025-05-08T13:41:22+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2025-05-08</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy; 2025 <a href=https://ag2.ai/ target=_blank rel=noopener>ag2</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://discord.gg/pAbnFJrkgZ target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg> </a> <a href=https://github.com/ag2ai/ag2 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg> </a> <a href=https://x.com/ag2oss target=_blank rel=noopener title=x.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg> </a> <a href=https://www.youtube.com/@ag2ai target=_blank rel=noopener title=www.youtube.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg> </a> <a href=https://www.linkedin.com/company/ag2ai target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["search.suggest", "search.highlight", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.tracking", "navigation.prune", "navigation.top", "navigation.footer", "content.tabs.link", "content.code.copy", "content.code.annotate", "content.action.edit"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../../js/timeago.min.js></script> <script src=../../../js/timeago_mkdocs_material.js></script> <script src=../../../javascripts/extra.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>